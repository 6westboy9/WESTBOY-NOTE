# 一、产品目标

构建一套**可视化、可配置、可复用**的文书模板设计画布，支持通过**拖拽式交互**完成文书结构、样式及数据绑定配置，最终生成可版本化管理、可预览、可导入导出的文书模板，用于多业务场景下的文书生成。

# 二、画布核心能力

### 基础交互能力

画布需提供接近专业设计工具（如 Figma / PPT / 表单设计器）的交互体验：

- **拖拽布局**
- 组件自由拖拽、调整大小
- 支持组件嵌套（布局组件内包含基础组件）

- **网格与对齐辅助**
- 网格吸附（可开关）
- 智能对齐参考线（边缘 / 中心对齐）
- 间距辅助提示（等距分布）

- **缩放与视图控制**
- 放大 / 缩小
- 适应屏幕
- 实际比例预览（1:1）

- **操作效率**
- 撤销 / 重做（Undo / Redo）
- 多选操作（Shift 多选 / 框选）
- 批量编辑属性
- 快捷键支持（可扩展）

# 三、组件体系设计

## 基础组件（内容型）

用于承载实际文书内容：

- 文本框（普通文本 / 富文本）
- 图片框
- 表格
- 签名栏
- 日期栏
- 勾选框 / 单选框（可选）

## 布局组件（结构型）

用于控制整体排版结构：

- 分栏（多列布局）
- 段落容器
- 页眉
- 页脚
- 页码组件
- 分割线

## 动态组件（逻辑型）

用于支持模板动态渲染能力：

- **变量占位符**
	- 示例：`{patientName}`、`{date}`
- **条件渲染块**
	- 基于角色、状态、字段值显示 / 隐藏
	- 支持多条件组合（AND / OR）

# 四、组件属性配置能力

### 布局与尺寸

- 位置（X / Y）
- 尺寸（宽 / 高）
- 对齐方式（左 / 中 / 右 / 顶 / 底）
- 层级（z-index）

## 样式属性

- 字体：字体族、字号、颜色
- 文本样式：加粗、斜体、下划线
- 边框：颜色、粗细、样式
- 背景色
- 圆角
- 内外边距（padding / margin）

## 数据绑定与校验

### 数据源配置

- 数据源类型：
- API 接口返回数据
- 当前画布上下文数据（如父组件数据）
- 数据字段映射
- 默认值设置

### 数据校验规则

- 必填校验
- 格式校验（日期、数值、正则）
- 范围校验
- 自定义校验逻辑（表达式 / 函数）

# 五、页面级配置能力

- 页边距配置（上 / 下 / 左 / 右）
- 纸张方向
	- 纵向
	- 横向
- 纸张规格
	- A4
	- A3（可扩展）
- 水印配置
- 文本水印
- 透明度
- 旋转角度
- 平铺 / 单点
  

# 六、模板数据模型设计

### 模板结构定义

- 使用 **JSON Schema** 描述模板结构
	- 包含内容：
	- 页面配置
	- 组件树（支持嵌套）
	- 样式配置
	- 数据绑定规则
	- 条件渲染逻辑

> 目标：前后端统一模型，可持久化、可迁移、可版本化。

# 七、模板管理能力

## 模板生命周期

- 模板保存
- 模板预览（支持模拟数据）
- 模板导入 / 导出（JSON）

## 版本管理

- 模板版本记录
- 版本差异对比（结构 / 配置）
- 历史版本回滚

## 模板库

- 公共模板库
- 业务模板分类
- 模板复用 / 克隆
- 模板权限控制（可扩展）

# 八、非功能性要求（建议）

## 性能
- 大模板加载不卡顿
- 画布操作响应 < 100ms

## 扩展性
- 组件插件化接入
- 支持自定义组件

## 兼容性
- 支持打印
- 支持 PDF 导出

## 安全性
- 模板与业务数据权限隔离