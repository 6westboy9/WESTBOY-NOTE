# 风险评估汇总

## 配置

1.移动护理的评估单性质配置

![[Pasted image 20240528152156.png|L|1000]]

2.字典中的评估单性质配置

evaluateNature

![[Pasted image 20240528152257.png|L|800]]

><font color="#c0504d">移动护理的评估单性质配置</font>生效的前提是在<font color="#c0504d">字典中的评估单性质配置</font>中存在！

```json
// 该病区中有效的评估单性质配置
{
    "309": [
        "pressureSore",
        "pain",
        "fallDown",
        "pipeFall",
        "selfCare",
        "autar",
        "acesodyneScore",
        "painScore",
        "mews",
        "nutrition",
        "depression",
        "anxiety",
        "none",
        "pressureObserve"
    ]
}
```


1. 查询有效的评估单性质配置
2. 查询在院患者信息

```sql
select *
from pat_inhos_record
where status != '2'
  and ward_code = #{wardCode}
  and ((out_date is null and in_date < #{endTime}) or (out_date is not null and out_date >= #{beginTime} and in_date < #{endTime}))
```

3. 查询患者护理评估数据

```java
com.lachesis.windranger.emr.api.IPatInhosNurseEvalutionApi#getEvaluationsByInhosCodesAndNaturesByDate

// 评估单低风险
public static final String EVALUATE_LOW_RISK = "01";
// 评估单中风险
public static final String EVALUATE_MEDIUM_RISK = "02";
// 评估单高风险
public static final String EVALUATE_HIGH_RISK = "03";
// 评估单无风险
public static final String EVALUATE_NORMAL_RISK = "04";
// 评估单极高风险
public static final String EVALUATE_EXTRE_HIGH_RISK = "05";
```


4. 汇总统计信息


## 接口

接口文档：http://10.2.43.39:9099/WRMSMnis/doc.html#/API/Evaluate-Data/getWardOutPatEvalutionResultDataUsingGET

```json
// GET http://10.2.3.172:10000/api/windranger/attend/evaluate/wardOutPatEvalutionData?beginDate=2024-05-28&endDate=2024-05-28&countAll=true&userCode=123&num=10&offset=0
// com.lachesis.windranger.controller.attend.EvaluateDataController#getWardOutPatEvalutionResultData

// GET http://10.2.3.172:10000/api/windranger/attend/evaluate/wardOutPatEvalutionData?
// beginDate=2024-05-28&
// endDate=2024-05-28&
// countAll=true&
// userCode=123&
// num=10&
// offset=0

// 响应
{
    "totalCnt": 14,
    "queryResult": [
        {
            "evaluateNatureCode": "pressureSore",
            "evaluateNatureName": "压疮",
            "riskLevelpatCountMap": null,
            "wardCode": "309",
            "wardName": "总院-消化内科",
            "nonRiskPatCount": 0,
            "lowRiskPatCount": 0,
            "medRiskPatCount": 0,
            "highRiskPatCount": 20,
            "lowRiskPatDayCount": 0,
            "medRiskPatDayCount": 0,
            "highRiskPatDayCount": 4363,
            "evaluateCount": 286,
            "evaluatePatCount": 20
        },
        ...
        {
            "evaluateNatureCode": "nutrition",
            "evaluateNatureName": "营养",
            "riskLevelpatCountMap": null,
            "wardCode": "309",
            "wardName": "总院-消化内科",
            "nonRiskPatCount": 0,
            "lowRiskPatCount": 0,
            "medRiskPatCount": 0,
            "highRiskPatCount": 0,
            "lowRiskPatDayCount": 0,
            "medRiskPatDayCount": 0,
            "highRiskPatDayCount": 0,
            "evaluateCount": 0,
            "evaluatePatCount": 0
        }
    ]
}
```