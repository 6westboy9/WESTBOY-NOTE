
>[!important] 医嘱基本原则：医嘱一旦下达，则不允许修改。只能停止和作废。如果需要修改的，那边把之前的医嘱停止或者作废掉。然后重开医嘱。

# 医嘱类型

<font color="#c0504d">按时效性分类：长期医嘱和临时医嘱。</font>

>如何判断是长期医嘱还是临时医嘱呢？根据<font color="#c0504d">pat_inhos_order</font>表的<font color="#c0504d">repeat_indicator</font>字段判断：0.临时医嘱；1.长期医嘱

# 唱对医嘱

唱对医嘱是指在医疗过程中，护士在执行医生开出的医嘱（包括护理级别、服药、注射等）时，由<font color="#f79646">两名护士</font>一起核对的一种操作。在这个过程中，一名护士会大声念出医嘱，而另一名护士则负责核对转抄的医嘱，确保两者无误后方可执行。这种操作是为了确保患者获得正确的治疗和护理，避免因纰漏或错误造成的不良后果。

# 医嘱用法

<font color="#f79646">前文：仅有药品医嘱会关联用法组！</font>

![[Pasted image 20240321095937.png|L|1000]]

### 用法组

概念：用法组这个概念是联新自己搞的，即用法所属的组。

<font color="#f79646">维护地方一</font>

>com.lachesis.windranger.mnis.contants.OrderConstants#ALL_ORDER_USAGE_MEDICINE 所有药品医嘱用法

|     |            用法组            | 用法组描述  | 所属医嘱类别组                             |
| :-: | :-----------------------: | :----: | ----------------------------------- |
|  1  |         ATOMIZING         |  雾化吸入  | <font color="#d83931">药品医嘱</font>   |
|  2  |           BLOOD           |   输血   | <font color="#d83931">药品医嘱</font>   |
|  3  |         INFUSION          |   输液   | <font color="#d83931">药品医嘱</font>   |
|  4  |          INJECT           |   注射   | <font color="#d83931">药品医嘱</font>   |
|  5  |         IN_INJECT         |   注射   | <font color="#d83931">药品医嘱</font>   |
|  6  |        SUB_INJECT         |   注射   | <font color="#d83931">药品医嘱</font>   |
|  7  |        PUMP_INJECT        |   注射   | <font color="#d83931">药品医嘱</font>   |
|  8  |         IV_INJECT         |   注射   | <font color="#d83931">药品医嘱</font>   |
|  9  |           ORAL            |   口服   | <font color="#d83931">药品医嘱</font>   |
| 10  |            LAB            |   检验   | <font color="#d83931">药品医嘱</font>   |
| 11  |         SKINTEST          |   皮试   | <font color="#d83931">药品医嘱</font>   |
| 12  | SKINTEST_MEDICINE_PREPARE | 皮试(备药) | <font color="#d83931">药品医嘱</font>   |
| 13  |            UT             |   其他   | <font color="#d83931">药品医嘱</font>   |
| 14  |      INFUSION_OTHER       | 泵入类输液  | <font color="#d83931">药品医嘱</font>   |
| 15  |            UZ             |   治疗   | <font color="#00b050">护理治疗医嘱</font> |

---

<font color="#f79646">维护地方二</font>

用法配置路径：<font color="#9bbb59">配置中心 - 系统配置 - 字典表配置</font>中搜索用法组。

```sql
select * from windranger_foundation.sys_dic where dic_type = 'orderType';
```

| dic\_code                 | dic\_name |
| :------------------------ | :-------- |
| ATOMIZING                 | 雾化吸入      |
| BLOOD                     | 输血        |
| INFUSION                  | 输液        |
| INJECT                    | 注射        |
| ORAL                      | 口服        |
| LAB                       | 检验        |
| SKINTEST                  | 皮试        |
| UT                        | 其他        |
| UZ                        | 治疗        |
| INFUSION\_OTHER           | 泵入类输液     |
| WY                        | 外用        |
| pxzs                      | 皮下注射      |
| cs                        | 测试1       |
| QCS                       | q测试       |
| JIZHU                     | 肌注        |
| UU                        | 测试用法组     |
| testOrder                 | 检验医嘱      |
| SKINTEST_MEDICINE_PREPARE | 皮试(备药)    |

>对应Java代码中的常量类：com.lachesis.windranger.mnis.contants.OrderTypeConstants

<font color="#f79646">两处维护地方，各自存在的意义是？目前看是以代码中维护为准，意思就是说字典表添加的用法组要生效必须改代码~</font>

字典表还有存在的意义？仅仅是这里做个显示？

![[Pasted image 20240513095510.png|L|1200]]

### 用法

用法信息：用法编号和用法名称。

用法配置路径：<font color="#9bbb59">配置中心 - 业务配置 - 移动护理 - 医嘱配置 - 用法配置</font>

用法信息来源：手动录入。

```sql
select * from windranger_emr.pat_order_usage_config;
```

| usage\_code 用法组 | usage\_code\_name 用法组名 | usage\_number 用法编号 | usage\_name 用法名称 |
| :-------------- | :--------------------- | :----------------- | :--------------- |
| INFUSION\_OTHER | 泵入类输液                  | 25                 | 微泵               |
| INFUSION        | 输液                     | 3                  | 静滴               |
| ORAL            | 口服                     | 28                 | 鼻饲               |
| ORAL            | 口服                     | 1                  | 口服               |
| ATOMIZING       | 雾化吸入                   | 18                 | 雾化               |
| INFUSION\_OTHER | 泵入类输液                  | 22                 | 冲洗               |
| UZ              | 治疗                     | 4                  | 外用               |
| INJECT          | 注射                     | 7                  | 静注               |
| UZ              | 治疗                     | 56                 | 口护用              |
| UZ              | 治疗                     | 60                 | 冲管用              |
| INJECT          | 注射                     | 33                 | 静推               |
| INFUSION\_OTHER | 泵入类输液                  | 74                 | 输液泵              |
| ORAL            | 口服                     | 59                 | 舌下含服             |
| INJECT          | 注射                     | 2                  | 肌注               |
| INJECT          | 注射                     | 8                  | 皮下注射             |
| INJECT          | 注射                     | 10                 | 皮内               |
| INJECT          | 注射                     | 34                 | 宫颈注射             |
| UZ              | 治疗                     | 41                 | 神经阻滞术            |
| ORAL            | 口服                     | 39                 | 泡服               |
| ...             | ...                    | ...                | ...              |

# 医嘱流程

医嘱流程配置路径：<font color="#9bbb59">配置中心 - 业务配置 - 移动护理 - 医嘱配置 - 医嘱流程配置</font>

流程主要包括两点：

* 流程类型：代指一类流程。
* 流程节点：流程对应的执行节点。

>[!danger] 注意：已经在修改前的流程节点中的医嘱并不会生效！即修改后，只有从头开始的流程才生效！

### 默认流程

默认流程类型对应的Java常量类：com.lachesis.windranger.mnis.contants.OrderProcessConstants.Type

```java
// 1.自配输液医嘱  
String INFUSION = "infusion";  
// 2.静配输液医嘱  
String INFUSION_DISPENSE = "infusion_dispense";  
// 3.泵入类输液医嘱  
String INFUSION_OTHER = "infusion_other";  
// 4.针剂注射  
String INJECT = "inject";  
// 5.口服用药(包药机)  
String ORAL_PACKAGE = "oral_package";  
// 6.口服用药(非包药机)  
String ORAL = "oral";  
// 7.雾化  
String ATOMIZATION = "atomization";  
// 8.输血  
String BLOOD = "blood";  
// 9.检验  
String CHECK = "check";  
// 10.皮试  
String SKINTEST = "skinTest";
// 11.皮试(备药)
String SKINTEST_MEDICINE_PREPARE = "skinTestMedicinePrepare";
// 12.护理治疗
String NURSING_CARE = "nursing_care";
// 13.护理治疗(审核)
String NURSING_CARE_CHECK = "nursing_care_check";
```

### 默认流程对应节点

| 序号  | 流程类型       | 流程类型编码                  | 流程节点                                                                                                                                                      |
| --- | ---------- | ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1   | 自配输液       | infusion                | 备药(medicine_prepare) — 备药审核(medicine_check) — 配药(dispensing) — 配药审核(dispensing_check) — 校对(infusion_check) — 医嘱执行(order_execute) — 输液巡视(infusion_inspect) |
| 2   | 泵入类输液      | infusion_other          | 备药(medicine_prepare) — 备药审核(medicine_check) — 配药(dispensing) — 配药审核(dispensing_check) — 校对(infusion_check) — 医嘱执行(order_execute) — 输液巡视(infusion_inspect) |
| 3   | 静配输液       | infusion_dispense       | 收药(medicine_receive) — 校对(infusion_check) — 医嘱执行(order_execute) — 输液巡视(infusion_inspect)                                                                  |
| 4   | 针剂注射       | inject                  | 备药(medicine_prepare) — 备药审核(medicine_check) — 配药(dispensing) — 配药审核(dispensing_check) — 校对(infusion_check) — 医嘱执行(order_execute)                          |
| 5   | 口服用药(包药机)  | oral_package            | 收药(medicine_receive)  — 药物复核(medicine_double_check) — 医嘱执行(order_execute)                                                                                 |
| 6   | 口服用药(非包药机) | oral                    | 备药(medicine_prepare) — 备药审核(medicine_check) — 医嘱执行(order_execute)                                                                                         |
| 7   | 雾化         | atomization             | 备药(medicine_prepare) — 备药审核(medicine_check) — 配药(dispensing) — 配药审核(dispensing_check) — 医嘱执行(order_execute)                                               |
| 8   | 输血         | blood                   | 备血(blood_prepare)— 收取血袋(blood_receive) — 输血前核对(blood_check) — 输血执行(blood_execute) — 输血巡视(blood_inspect) — 回收血袋(blood_recover)                             |
| 9   | 检验         | check                   | 处理(check_collect_dispose) — 审核(check_collect_check) — 开始采集(check_collect_start) — 结束采集(check_collect_end) — 送检(check_send)                                |
| 10  | 皮试         | skinTest                | 皮试执行(skinTest_execute) — 皮试结果录入(skinTest_input)                                                                                                           |
| 11  | 皮试(备药)     | skinTestMedicinePrepare | 备药(medicine_prepare) — 备药审核(medicine_check) — 配药(dispensing) — 配药审核(dispensing_check) — 皮试执行(skinTest_execute) — 皮试结果录入(skinTest_input)                   |
| 12  | 护理治疗       | nursing_care            | 护理治疗执行(nursing_execute)                                                                                                                                   |
| 13  | 护理治疗(审核)   | nursing_care_check      | 审核(nursing_execute_check) — 护理治疗执行(nursing_execute)                                                                                                       |


### 自定义流程

- 默认流程：部分流程是已经初始化完成。已经初始化完成的这部分流程，是作为自定义流程时使用的。
- 自定义流程：可以新增流程
	- 必须指定用法组：只能指定一次，即<font color="#f79646">自定义流程A配置用法组A，那么自定义流程B就不能配置用法组B了</font> --- <font color="#f79646">多个自定义流程中不会存在重复的用法组编码！</font>
		- 因为最终在`com.lachesis.windranger.mnis.service.impl.ScanService#getGeneralOrderbar`中根据用法组（usageCode）获取流程时，需要进行用法组匹配
	- <font color="#f79646">必须指定归属流程</font>：相当于添加默认流程节点，可在默认流程上进行编辑

```js
// 对应查询接口
// GET http://10.2.3.170:86/api/windranger/orderProcessTpl/current/list

use mnis
db.orderProcessTpl.find({current:true}).sort({sortNo:1})
```

![[Pasted image 20240513102947.png|1600]]

>自定义流程归属的用法只能使用一次，所以<font color="#f79646">多个自定义流程中不会存在重复的用法组编码！</font>

### 医嘱 → 用法 → 流程

* 用法 = 用法编号 administrationCode/adminCode
* 用法组 usageCode
* 流程类型 processType

场景：

* 根据医嘱获取医嘱执行流程？用法编码 → 用法组 → 流程类型
* 已知用法组时？用法组 → 流程类型

<font color="#f79646">一般如何根据医嘱查找执行流程呢？</font>

```java
// 1.根据医嘱上的用法编码获取用法，等价于：select usage_code from windranger_emr.pat_order_usage_config where usage_number = '?';
String type = OrderbarRuleParseUtil.getTypeNameByCode(detail.getAdministrationCode());
// 2.根据用法获取流程类型
String processType = OrderProcessParseUtil.getProcessType(type, detail.getIsDispensed());
// 3.根据流程类型查找执行流程，等价于：use mnis 
// db.orderProcessTpl.find({processType:'blood',current:true})
// 取processNodes字段，为对象数组类型，即流程执行节点信息
```


> [!important] 自定义流程注意
> - 默认流程（固定流程）：部分流程是已经初始化完成。已经初始化完成的这部分流程，是作为自定义流程时使用的。
> - 自定义流程：可以新增流程
> 	- 必须指定用法组：只能指定一次，即<font color="#f79646">自定义流程A配置用法组A，那么自定义流程B就不能配置用法组B了</font> --- <font color="#f79646">多个自定义流程中不会存在重复的用法组编码！</font>
> 		- 因为最终在com.lachesis.windranger.mnis.service.impl.ScanService#getGeneralOrderbar中根据用法组（usageCode）获取流程时，需要进行用法组匹配
> 	- <font color="#f79646">必须指定归属流程</font>：相当于添加默认流程节点，可在默认流程上进行编辑

### 条码 → 流程 <font color="#f79646">TODO</font>

>方法入口：com.lachesis.windranger.mnis.service.impl.ScanService#getGeneralOrderbar

### 其它
---

按照医嘱类别来分，六大医嘱类别：1.药品医嘱；2.检验医嘱；3.检查医嘱；4.输血医嘱；5.护理治疗医嘱；6.其它医嘱

* 仅有药品医嘱会关联用法，通过关联用法组，再确认执行流程！
	* 用法组与流程为多对一的关系！
* 那其它医嘱类型的流程如何确定呢？

<font color="#f79646">用法组与流程为多对一的关系！</font>

* 创建用法组 --- `windrangerfoundation.sysdic where dic_type = 'orderType'`
* 创建用法：手动录入并关联用法组 --- `windrangeremr.patorderusageconfig`
* 根据用法组确定对应的流程类型 --- 那么这里流程类型又是什么呢？其实这里的流程类型=流程名 <font color="#f79646">重点理解：用法组如何关联流程类型呢？</font>
* 找到对应的流程类型之后，就知道对应的流程节点。然后就清楚具体的操作流程。

>根据<font color="#953734">用法组</font>获取<font color="#953734">医嘱流程</font>：com.lachesis.windranger.mnis.util.OrderProcessParseUtil#getProcessType --- 重点
>根据<font color="#953734">医嘱流程</font>获取<font color="#953734">用法组</font>：com.lachesis.windranger.mnis.util.OrderProcessParseUtil#getOrderType

<font color="#9bbb59">1.写死的部分</font>

|       用法组        | 用法组描述 |       前置条件       |        流程类型         |   流程类型描述   | 维护关系 |
| :--------------: | :---: | :--------------: | :-----------------: | :--------: | :--: |
|    `INFUSION`    |  输液   | `isDispensed=0`  |     `infusion`      |   自动输液医嘱   | 代码写死 |
|    `INFUSION`    |  输液   | `isDispensed=1`  | `infusion_dispense` |   静配输液医嘱   | 代码写死 |
| `INFUSION_OTHER` | 泵入类输液 |                  |  `infusion_other`   |  泵入类输液医嘱   | 代码写死 |
|   `IN_INJECT`    |       |                  |      `inject`       |    针剂注射    | 代码写死 |
|     `INJECT`     |       |                  |      `inject`       |    针剂注射    | 代码写死 |
|   `SUB_INJECT`   |       |                  |      `inject`       |    针剂注射    | 代码写死 |
|  `PUMP_INJECT`   |       |                  |      `inject`       |    针剂注射    | 代码写死 |
|   `IV_INJECT`    |       |                  |      `inject`       |    针剂注射    | 代码写死 |
|      `ORAL`      |  口服   | `isDispensed=2`  |   `oral_package`    | 口服用药(包药机)  | 代码写死 |
|      `ORAL`      |  口服   | `isDispensed!=2` |       `oral`        | 口服用药(非包药机) | 代码写死 |
|      `LAB`       |  检验   |                  |       `check`       |     检验     | 代码写死 |
|       `UC`       |       |                  |       `check`       |     检验     | 代码写死 |
|     `BLOOD`      |  输血   |                  |       `blood`       |     输血     | 代码写死 |
|       `UZ`       |  治疗   |                  |   `nursing_care`    |    护理治疗    | 代码写死 |
|       `UT`       |  其他   |                  |   `nursing_care`    |    护理治疗    | 代码写死 |
|    `SKINTEST`    |  皮试   |                  |     `skinTest`      |     皮试     | 代码写死 |
|   `ATOMIZING`    | 雾化吸入  |                  |    `atomization`    |     雾化     | 代码写死 |

<font color="#9bbb59">2.没有写死的部分</font>

```java
// 直接从流程表中根据用法组编码查询
Query query = new Query();
query.addCriteria(Criteria.where("usageCode").is(orderTypeName));
query.addCriteria(Criteria.where("current").is(true));
List<OrderProcessTpl> orderProcessTpls = orderProcessParseUtil.mongoTemplate.find(query, OrderProcessTpl.class);
if (CollectionUtils.isNotEmpty(orderProcessTpls)) {
	processType = orderProcessTpls.get(0).getProcessType();
}
```

![[Pasted image 20240328173322.png|L|1200]]


# 医嘱类别

### 医嘱类别组

>医嘱类别组的来源有两个：枚举类和字典表

枚举类：

```java
public enum MnisOrderCategoryGroupOrderEnum {  
    MEDICATION_ORDER("medicationOrder", 0, "药品医嘱"),  
    TEST_ORDER("testOrder", 1, "检验医嘱"),  
    EXAMINATION_ORDER("examinationOrder", 2, "检查医嘱"),  
    BLOOD_TRANSFUSION_ORDER("bloodTransfusionOrder", 3, "输血医嘱"),  
    NURSING_ORDER("nursingOrder", 4, "护理治疗医嘱"),  
    OTHER_ORDER("otherOrder", 5, "其它医嘱");
}
```

字典表：

```sql
select * from windranger_foundation.sys_dic where dic_type = 'orderCategoryGroup';
```

| seq | dic\_code 医嘱类别组       | dic\_name 医嘱类别组名称 |
| :-- | :-------------------- | :---------------- |
| 1   | medicationOrder       | 药品医嘱              |
| 2   | testOrder             | 检验医嘱              |
| 3   | examinationOrder      | 检查医嘱              |
| 4   | bloodTransfusionOrder | 输血医嘱              |
| 5   | nursingOrder          | 护理治疗医嘱            |
| 6   | otherOrder            | 其它医嘱              |

可以理解为，枚举类是字典表在Java代码中常量定义，字典表保存所有的医嘱类别组。

### 医嘱类别

医嘱类别组既然是组，理所当然就包括了多个医嘱类别，关联表：<font color="#c0504d">windranger_mnis.pat_order_category</font>，该表的数据在哪儿维护呢？用法配置路径：<font color="#9bbb59">配置中心 - 业务配置 - 移动护理 - 医嘱配置 - 医嘱类别配置</font>

```sql
-- 医嘱类别编码最终对应pat_inhos_order_group的order_category_code字段
select sd.dic_code, sd.dic_name, poc.category_symbol, poc.category_name  
from windranger_mnis.pat_order_category poc  
   left join (select * from windranger_foundation.sys_dic where dic_type = 'orderCategoryGroup') sd  
   on poc.order_category_group = sd.dic_code  
order by sd.dic_code;
```

| dic\_code <font color="#c0504d">医嘱类别组</font> | dic\_name <font color="#c0504d">医嘱类别组名称</font> | category\_symbol <font color="#c0504d">医嘱类别编码</font> | category\_name <font color="#c0504d">医嘱类别名称</font> |
| :------------------------------------------- | :--------------------------------------------- | :--------------------------------------------------- | :------------------------------------------------- |
| examinationOrder                             | 检查医嘱                                           | 4                                                    | 检查费                                                |
| medicationOrder                              | 药品医嘱                                           | A                                                    | 西药                                                 |
| medicationOrder                              | 药品医嘱                                           | 3                                                    | 中成药                                                |
| medicationOrder                              | 药品医嘱                                           | 2                                                    | 中药费                                                |
| medicationOrder                              | 药品医嘱                                           | 1                                                    | 西药费                                                |
| nursingOrder                                 | 护理治疗医嘱                                         | 测试                                                   | 测试                                                 |
| nursingOrder                                 | 护理治疗医嘱                                         | 9999                                                 | 护理治疗                                               |
| nursingOrder                                 | 护理治疗医嘱                                         | 18                                                   | 其他费                                                |
| nursingOrder                                 | 护理治疗医嘱                                         | 20                                                   | 输氧费                                                |
| nursingOrder                                 | 护理治疗医嘱                                         | 53                                                   | 特殊治疗费                                              |
| nursingOrder                                 | 护理治疗医嘱                                         | 6                                                    | 治疗费                                                |
| nursingOrder                                 | 护理治疗医嘱                                         | 16                                                   | 护理费                                                |
| otherOrder                                   | 其它医嘱                                           | 17                                                   | 床位费                                                |
| otherOrder                                   | 其它医嘱                                           | 23                                                   | 血费                                                 |
| otherOrder                                   | 其它医嘱                                           | 7                                                    | 手术费                                                |
| otherOrder                                   | 其它医嘱                                           | 57                                                   | 一般诊疗费                                              |
| otherOrder                                   | 其它医嘱                                           | 15                                                   | 材料费                                                |
| otherOrder                                   | 其它医嘱                                           | 14                                                   | 诊察费                                                |
| testOrder                                    | 检验医嘱                                           | 5                                                    | 检验费                                                |
| testOrder                                    | 检验医嘱                                           | 33                                                   | 化验费                                                |

>原始医嘱中存储医嘱类别的字段：<font color="#f79646">windranger_emr.pat_inhos_order</font>表中<font color="#f79646">order_class_code</font>字段

### 医嘱类别组和用法组

前端医嘱查询入口

1. 医嘱管理 - 医嘱查看 没有展示前端写死的 <font color="#c0504d">口服(包药剂)</font>
2. 医嘱管理 - 执行单 <font color="#c0504d">如下图</font>
3. 医嘱管理 - 医嘱执行记录 <font color="#c0504d">如下图</font>
4. 医嘱管理 - 备/配药执行记录 <font color="#c0504d">如下图</font>

>疑问：医嘱管理-医嘱查看

![[Pasted image 20240513095510.png|1200]]

查询逻辑：

* 根据医嘱类别组获取所有医嘱类别编码（一对多关系，类别组 → 所有类别编码）
* 底层查询只区分了药品医嘱和非药品医嘱：
	* 药品医嘱：进一步根据用法组条件查询所有用法，然后<font color="#f79646">根据用法+药品医嘱类别两个条件</font>去查原始医嘱
	- 非药品医嘱：直接根据<font color="#f79646">非药品医嘱类别</font>去查询原始医嘱

>[!important] 深入理解
>1. <font color="#f79646">药品</font>和<font color="#f79646">护理治疗医嘱</font>会关联用法组！（但是前端做的关联查询条件在点击护理治疗时并没有打勾的用法组）
>1. <font color="#f79646">检查</font>医嘱目前没有！
>2. <font color="#f79646">输血</font>、<font color="#f79646">检验</font>医嘱怎么查询呢？貌似在「医嘱管理-医嘱查看」中并不能查询，除非有对应的原始医嘱，然后根据类别去查询~

>[!summary] 总结：这个地方只是查询<font color="#f79646">药品医嘱</font>的，非药品医嘱比如输血、检验医嘱都查不到！


类别组：

| seq | dic\_code 医嘱类别组       | dic\_name 医嘱类别组名称 |
| :-- | :-------------------- | :---------------- |
| 1   | medicationOrder       | 药品医嘱              |
| 2   | testOrder             | 检验医嘱              |
| 3   | examinationOrder      | 检查医嘱              |
| 4   | bloodTransfusionOrder | 输血医嘱              |
| 5   | nursingOrder          | 护理治疗医嘱            |
| 6   | otherOrder            | 其它医嘱              |
医嘱类别组与用法组关联关系：

|     |       用法组        | 用法组描述 | 医嘱类别组  |                                                                           |
| :-: | :--------------: | :---: | ------ | ------------------------------------------------------------------------- |
|  1  |   `ATOMIZING`    | 雾化吸入  | 药品医嘱   |                                                                           |
|  2  |     `BLOOD`      |  输血   | 药品医嘱   |                                                                           |
|  3  |    `INFUSION`    |  输液   | 药品医嘱   |                                                                           |
|  4  |     `INJECT`     |  注射   | 药品医嘱   |                                                                           |
|  5  |   `IN_INJECT`    |  注射   | 药品医嘱   |                                                                           |
|  6  |   `SUB_INJECT`   |  注射   | 药品医嘱   |                                                                           |
|  7  |  `PUMP_INJECT`   |  注射   | 药品医嘱   |                                                                           |
|  8  |   `IV_INJECT`    |  注射   | 药品医嘱   |                                                                           |
|  9  |      `ORAL`      |  口服   | 药品医嘱   |                                                                           |
| 10  |      `LAB`       |  检验   | 药品医嘱   |                                                                           |
| 11  |    `SKINTEST`    |  皮试   | 药品医嘱   |                                                                           |
| 12  |       `UT`       |  其他   | 药品医嘱   |                                                                           |
| 13  | `INFUSION_OTHER` | 泵入类输液 | 药品医嘱   |                                                                           |
| 14  |       `UZ`       |  治疗   | 护理治疗医嘱 | <font color="#c0504d">BUG</font>：但是前端做的关联查询条件在点击护理治疗时并没有打勾的用法组，点击药品医嘱时打勾了 |

### 医嘱 → 医嘱类别组

>方法入口：com.lachesis.windranger.mnis.util.OrderUtils#getOrderByType

1. 药品医嘱
	- 条件：查询药品医嘱的所有用法组下的用法编号，<font color="#f79646">上述1~13的用法组的所有用法编号</font>，并且pat_inhos_order_group.<font color="#f79646">administration_code</font>在上述结果集内
	- <font color="#c0504d">对应的医嘱类别组：com.lachesis.windranger.emr.model.PatInhosOrderGroupExt#orderCategoryCode = medicationOrder</font>
2. 护理治疗医嘱
	- 判断条件一：查询药品医嘱的所有用法组下的用法编号，<font color="#f79646">上述14的用法组的所有用法编号</font>，并且pat_inhos_order_group.<font color="#f79646">administration_code</font>在上述结果集内
	- 判断条件二：
		- 查询护理医嘱所有类别：select category_symbol from windranger_emr.pat_order_category where order_category_group = 'nursingOrder'
		- 并且pat_inhos_order_group.<font color="#f79646">order_class_code</font>在上述类别结果集内
	- <font color="#f79646">满足上述两者任意条件</font>
	- <font color="#c0504d">对应的医嘱类别组：com.lachesis.windranger.emr.model.PatInhosOrderGroupExt#orderCategoryCode = nursingOrder</font>
3. 输血医嘱
	- <font color="#9bbb59">如何确定呢？ </font>
	- <font color="#c0504d">对应的医嘱类别组：com.lachesis.windranger.emr.model.PatInhosOrderGroupExt#orderCategoryCode = bloodTransfusionOrder</font>
4. 检验医嘱
	- <font color="#9bbb59">如何确定呢？TODO</font>
	- <font color="#c0504d">对应的医嘱类别组：com.lachesis.windranger.emr.model.PatInhosOrderGroupExt#orderCategoryCode = testOrder</font>
5. 检查医嘱（暂无）
6. 其它医嘱
	- 不满足1、2、3、4、5
	- <font color="#c0504d">对应的医嘱类别组：com.lachesis.windranger.emr.model.PatInhosOrderGroupExt#orderCategoryCode = otherOrder</font>

### 医嘱类别 → 用法组

1. 药品医嘱：可以直接根据用法组和用法的关系表确定
2. 护理治疗医嘱
	1. 按用法组：可以直接根据用法组和用法的关系表确定
	2. 按医嘱类别：<font color="#c0504d">写死UZ</font>
3. 输血医嘱：<font color="#c0504d">写死BLOOD</font>
4. 检验医嘱：<font color="#c0504d">写死LAB</font>
5. 检查医嘱（暂无）
6. 其它医嘱：母鸡呀

### 医嘱类别组 → 医嘱

>方法入口：com.lachesis.windranger.mnis.service.impl.OrderService#getOrderList

* 药品医嘱
	* 查询所有用法
	* 根据用法查询医嘱
* 非药品医嘱
	* 查询医嘱类别组中的所有类别
	* 根据类别查询医嘱

> [!question] 疑问
>在医嘱拆分时给 医嘱设置类别组 和 选定类别组条件查询医嘱 两个逻辑存在差异

# 医嘱条码

## 医嘱条码类型

>方法入口：com.lachesis.windranger.mnis.service.impl.ScanService#getGeneralOrderbar

| 编码                 | 描述     |
| ------------------ | ------ |
| order              | 医嘱     |
| blood_product_bar  | 输血-产品码 |
| blood_donation_bar | 输血-献血码 |
| lab                | 检验     |
| exam               | 检查     |

## 医嘱条码规则

配置路径：<font color="#9bbb59">配置中心 - 业务配置 - 移动护理 - 医嘱配置 - 医嘱条码规则配置</font>

><font color="#f79646">接口</font>

```json
// GET http://10.2.3.170:86/api/windranger/BarRuleSettingExt/list

[
    {
        "id": "620c6e06f526861a02ef5c0c",
        "ruleKey": "zp_rule_settings",
        "ruleName": "自配输液条码规则",
        "rulePrefix": "zpsy@",
        "ruleExpression": null,
        "ruleContent": null
    }
    //...
]
```

><font color="#f79646">真实存储</font>

```js
use mnis
db.barRuleSetting.find({})
```

| ruleKey                      | ruleName       | rulePrefix | ruleExpression          |
| :--------------------------- | :------------- | :--------- | :---------------------- |
| zp\_rule\_settings           | 自配输液条码规则       | zpsy@      | null                    |
| jp\_rule\_settings           | 静配输液条码规则       | jpsy@      |                         |
| blr\_rule\_settings          | 泵入类输液条码规则      | blrxy@     |                         |
| zj\_rule\_settings           | 针剂注射条码规则       | zj@        | null                    |
| byj\_rule\_settings          | 口服药\(包药机\)条码规则 | byj@       | ^.{13}$                 |
| kf\_rule\_settings           | 口服药医嘱条码规则      | kf@        |                         |
| wh\_rule\_settings           | 雾化条码规则         | wh@        |                         |
| sx\_rule\_settings           | 输血条码规则         | sx@        | null                    |
| jy\_rule\_settings           | 检验条码规则         |            | null                    |
| ps\_rule\_settings           | 皮试条码规则         | ps@        | null                    |
| uz\_rule\_settings           | 护理治疗类条码规则      | uz@        |                         |
| sx\_donation\_rule\_settings | 输血类献血码         |            | null                    |
| sx\_product\_rule\_settings  | 输血类产品码         |            | null                    |
| medicine\_rule\_settings     | 药箱总码           |            | tsj.\*?                 |
| patientBar                   | 患者条码           |            | ^\(BR\).\*              |
| roomBar                      | 病房条码           |            | ^room\\d+$              |
| DeviceMacRules               | 设备MAC条码        |            | \(\\w{6}\[-M\]\)\\w{12} |
## 用法组 → 医嘱条码规则

>根据用法组获取医嘱拆分规则：com.lachesis.windranger.mnis.util.OrderbarRuleParseUtil#getRuleValue
>根据用法组获取医嘱执行流程：com.lachesis.windranger.mnis.util.OrderProcessParseUtil#getProcessType

|      用法组       | 用法组描述 |                  前置条件                   |      拆分条码规则       |   拆分条码规则描述   |       流程类型        |   流程类型描述   | 备注               |
| :------------: | :---: | :-------------------------------------: | :---------------: | :----------: | :---------------: | :--------: | ---------------- |
|    INFUSION    |  输液   | isDispensed = null \|\| isDispensed = 0 | zp_rule_settings  |   自配输液条码规则   |     infusion      |   自动输液医嘱   | 不一致（细微差别，可能是bug） |
|    INFUSION    |  输液   |   isDispensed ≠ null isDispensed = 1    | jp_rule_settings  |   静配输液条码规则   | infusion_dispense |   静配输液医嘱   | 拆分条码规则与流程一致      |
| INFUSION_OTHER | 泵入类输液 |                                         | blr_rule_settings |   泵入类输液医嘱    |  infusion_other   |  泵入类输液医嘱   | 拆分条码规则与流程一致      |
|   IN_INJECT    | 针剂注射  |                                         | zj_rule_settings  |   针剂注射条码规则   |      inject       |    针剂注射    | 拆分条码规则与流程一致      |
|     INJECT     | 针剂注射  |                                         | zj_rule_settings  |   针剂注射条码规则   |      inject       |    针剂注射    | 拆分条码规则与流程一致      |
|   SUB_INJECT   | 针剂注射  |                                         | zj_rule_settings  |   针剂注射条码规则   |      inject       |    针剂注射    | 拆分条码规则与流程一致      |
|  PUMP_INJECT   | 针剂注射  |                                         | zj_rule_settings  |   针剂注射条码规则   |      inject       |    针剂注射    | 拆分条码规则与流程一致      |
|   IV_INJECT    | 针剂注射  |                                         | zj_rule_settings  |   针剂注射条码规则   |      inject       |    针剂注射    | 拆分条码规则与流程一致      |
|      ORAL      |  口服   |  isDispensed ≠ null && isDispensed = 2  | byj_rule_settings | 口服药(包药机)条码规则 |   oral_package    | 口服用药(包药机)  | 拆分条码规则与流程一致      |
|      ORAL      |  口服   | isDispensed = null \|\| isDispensed ≠ 2 | kf_rule_settings  |  口服药医嘱条码规则   |       oral        | 口服用药(非包药机) | 拆分条码规则与流程一致      |
|      LAB       |  检验   |                                         | jy_rule_settings  |    检验条码规则    |       check       |     检验     | 拆分条码规则与流程一致      |
|       UC       |  检验   |                                         | jy_rule_settings  |    检验条码规则    |       check       |     检验     | 拆分条码规则与流程一致      |
|     BLOOD      |  输血   |                                         | sx_rule_settings  |    输血条码规则    |       blood       |     输血     | 拆分条码规则与流程一致      |
|       UZ       |  治疗   |                                         | uz_rule_settings  |  护理治疗类条码规则   |   nursing_care    |    护理治疗    | 拆分条码规则与流程一致      |
|       UT       |  其他   |                                         |         -         |      -       |   nursing_care    |    护理治疗    | 不一致              |
|    SKINTEST    |  皮试   |                                         | ps_rule_settings  |    皮试条码规则    |     skinTest      |     皮试     | 拆分条码规则与流程一致      |
|   ATOMIZING    | 雾化吸入  |                                         | wh_rule_settings  |    雾化条码规则    |    atomization    |     雾化     | 拆分条码规则与流程一致      |
# 医嘱执行

## 执行场景

| SEQ | 场景      | 接口                                  | <font color="#c0504d">PDA操作</font> | <font color="#9bbb59">PC操作</font> | 备注                                                       | 回写类型                                      |
| --- | ------- | ----------------------------------- | ---------------------------------- | --------------------------------- | -------------------------------------------------------- | ----------------------------------------- |
| 1   | 用药类医嘱执行 | POST /order/drug/execute            | 扫码                                 |                                   |                                                          | <font color="#c0504d">orderExecute</font> |
| 2   | 执行皮试    | POST /order/skinTest/execute        | 扫码                                 |                                   |                                                          | <font color="#c0504d">orderExecute</font> |
| 3   | 皮试录入    | POST /order/skinTest/enter          | 扫码                                 |                                   |                                                          | <font color="#c0504d">orderExecute</font> |
| 4   | 护理医嘱执行  | POST /nurse/execute                 | 扫码                                 |                                   |                                                          | <font color="#c0504d">orderExecute</font> |
| 5   | 口服药医嘱执行 | POST /order/oral/medication/execute | 扫码                                 |                                   |                                                          | <font color="#c0504d">orderExecute</font> |
| 6   | 输血执行    | POST /blood/execute                 | 扫码                                 |                                   |                                                          | BloodTransfusion                          |
| 7   | 手动执行2   | POST /order/manual/execute<br>      | 执行单-长按-选择手动执行                      | -                                 | 手动执行医嘱指定流程节点                                             | manualExecution                           |
| 8   | 手动执行1   | POST /order/manual/exec             | -                                  | 医嘱管理-医嘱执行记录-右击-点击手动执行             | 手动执行医嘱完整流程，执行前提：医嘱类别组 = 1.药品医嘱 \|\| 2.护理治疗医嘱 \|\| 3.其它医嘱 | manualExecution                           |
| 9   | 医嘱执行回退  | PUT /order/order/back               |                                    |                                   |                                                          |                                           |

# ---

# <font color="#4bacc6">数据结构与思考</font>

>原始医嘱（表：pat_inhos_order）

| order\_code | order\_group\_no                       | order\_sub\_no | order\_text | order\_status |
| :---------- | :------------------------------------- | :------------- | :---------- | :------------ |
| 1012436010  | <font color="#c0504d">833345390</font> | 1012436010     | 母乳喂养医嘱      | 0             |
| 9012436010  | <font color="#f79646">833345391</font> | 1012436011     | 母乳喂养医嘱1     | 0             |

>拆分医嘱（表：pat_inhos_order_group）

| group\_unique\_code         | order\_group\_no                       | inhos\_code | orderbar               | plan\_time          | order\_sort\_no | execute\_status |
| :-------------------------- | :------------------------------------- | :---------- | :--------------------- | :------------------ | :-------------- | :-------------- |
| 122954512411210800833345390 | <font color="#c0504d">833345390</font> | 12295451    | kf@2411210800833345390 | 2024-11-21 08:00:00 | 1               | 0               |
| 122954512411211200833345390 | <font color="#c0504d">833345390</font> | 12295451    | kf@2411211200833345390 | 2024-11-21 12:00:00 | 2               | 0               |
| 122954512411212000833345390 | <font color="#c0504d">833345390</font> | 12295451    | kf@2411212000833345390 | 2024-11-21 20:00:00 | 3               | 0               |
| 122954512411210800833345391 | <font color="#f79646">833345391</font> | 12295451    | kf@2411210800833345391 | 2024-11-21 08:00:00 | 1               | 0               |
| 122954512411211200833345391 | <font color="#f79646">833345391</font> | 12295451    | kf@2411211200833345391 | 2024-11-21 12:00:00 | 2               | 0               |
| 122954512411212000833345391 | <font color="#f79646">833345391</font> | 12295451    | kf@2411212000833345391 | 2024-11-21 20:00:00 | 3               | 0               |

>**正常情况**：同一组医嘱order_group.order_group_no与order_group.orderbar是一对多的关系（且不同组医嘱的orderbar肯定不相同）
>**另类情况**：<font color="#c0504d">南海医院</font>就存在不同组医嘱相同orderbar的情况（即order_group.order_group_no不相同，但是order_group.orderbar相同）

* 拆分医嘱表中group_unique_code字段**全局唯一**
* 原始医嘱表中order_group_no不相同表示不同组医嘱，**可以存在多条相同order_group_no的数据**，表示组内的多条原始医嘱
* **医嘱拆分维度**：我们自己的医嘱拆分维度是按照order_group_no进行拆分


<font color="#c0504d">广东省人民医院南海医院（平洲医院）</font> → 不同order_barorder_group_no下存在相同order_bar

```json
{
    "executeItems": [
        {
            "inhosCode": "12295451",
            "orderBar": "2023101800052",              // 相同orderBar不同orderGroupNo
            "processId": "660239c645dd72391dcbca62",
            "orderGroupNo": "835940072",
            "processType": "oral_package",
            "processNode": "order_execute"
        },
        {
            "inhosCode": "12295451",
            "orderBar": "2023101800052",
            "processId": "660239c645dd72391dcbca62",
            "orderGroupNo": "833345390",
            "processType": "oral_package",
            "processNode": "order_execute"
        }
    ],
    "checkUserCode": "8099",
    "wardCode": "309"
}
```

>扫码\_PDA\_用药类医嘱

1. 选取需要执行的医嘱条码 & 生成二维码
	- 医嘱条码字段：windranger_emr.pat_inhos_order_group#orderbar <font color="#4f6128">zj@171354522405090800899403546</font>
	- 生成二维码：[文本二维码生成器](https://cli.im/text/other)
2. 进入执行节点
	1. 扫描医嘱条码进行 - 备药
	2. 扫描医嘱条码进行 - 备药审核
	3. 扫描医嘱条码进行 - 配药
	4. 扫描医嘱条码进行 - 配药审核
	5. 扫描患者腕带条码进行 - 医嘱执行
		- 患者腕带字段：windranger_emr.pat_inhos_record#barcode <font color="#4f6128">BR|1023482|17135452</font>

### 手动_PDA


### 手动_PC

```js
// POST http://10.2.3.170:10000/api/windranger/order/manual/exec

{
	"wardCode": "340",
	"orderCategoryCode": "medicationOrder",
	"orderbar": "zpsy@123784642405090800835120758",
	
	"startExecTime": "2024-05-09 13:14:17",  // 开始执行-时间
	"startExecUserCode": "123",              // 开始执行-执行人usercode
	"startExecPwd": "123",                   // 开始执行-执行人passward
	"startCheckUserCode": "",                // 开始执行-核对人usercode
	"startCheckPwd": "",                     // 开始执行-核对人passward

	"endExecTime": "2024-05-09 13:14:17",    // 结束执行-时间
	"endExecUserCode": "123",                // 结束执行-执行人usercode
	"endExecPwd": "123",                     // 结束执行-执行人passward
	
	"execReason": "网络不好"	                 // 执行原因
}
```


## 执行状态

* windranger_emr.pat_inhos_order_group#execute_status
	* 0：未执行
	* 1：执行中
	* 2：已执行
	* 3：停止
	* 4：作废

## 执行流程 <font color="#f79646">TODO</font>


TODO

- 更新医嘱信息
- 插入医嘱执行节点
- 新增输液巡视

* 输液巡视
	* MnisInfusionMonitor
	* 数据库表：windranger_mnis.mnis_infu_monitor
	* 输液巡视建议看：com.lachesis.windranger.mnis.service.impl.PatOrderExecService#generalExecute 医嘱执行中的新增输液巡视逻辑
* 病房巡视
	* MnisNursePatrol
	* 数据库表：windranger_mnis.mnis_nurse_patrol
	* 新增病房巡视：com.lachesis.windranger.mnis.service.impl.MnisNursePatrolService#addNursePatrolRecord(String inhosCode) 

# <font color="#4bacc6">医嘱管理页面</font>

![[Pasted image 20250205114043.png|134]]

说明：

* 医嘱查看
* 执行单
* 医嘱执行记录
* 瓶签打印
* 瓶签打印-新
* 输液巡视单


## 医嘱查看


## 执行单



## 医嘱执行记录

>之前重构一版的入口：com.lachesis.windranger.mnis.service.impl.order.execute.record.facade.OrderExecRecordFacade#getBloodExecuteRecords


* **行维度**：按照orderbar进行分组展示
* 医嘱内容：每组医嘱对应的原始医嘱，所有原始医嘱的order_group_no相同，<font color="#f79646">但是例外：南海医院相同orderbar存在不同order_group_no~</font>

## 瓶签打印

![[Pasted image 20241121171113.png|1200]]

* **行维度**：按照拆分医嘱的order_group_unicode维度 --- **全局唯一**
* 每行的医嘱内容为拆分医嘱order_group_no与原始医嘱order_group_no关联查询，原始医嘱相同order_group_no可能会存在多条~

## 停止医嘱显示规则

配置路径：<font color="#9bbb59">配置中心 - 业务配置 - 移动护理 - 医嘱配置 - 医嘱停止配置 - 是否显示当天已停止医嘱</font>

>方法入口：com.lachesis.windranger.mnis.util.OrderUtils#filterOrderStatistic

<font color="#f79646">仅长期医嘱适用此规则！</font>

* @ 规则1.都显示 : <font color="#c0504d">不做任何过滤</font>
* @ 规则2.都不显示 : <font color="#c0504d">计划执行时间大于停止医嘱时间当天0点之后的数据都不显示</font>

基础概念

* 医嘱批次表：PatInhosOrderGroup
* 停止医嘱时间：PatInhosOrder.stopDateTime
* 医嘱计划执行时间： PatInhosOrderGroup.planTime

```
PatInhosOrder.stopDateTime != null
&& PatInhosOrder.repeatIndicator == 1 长期医嘱
&& PatInhosOrderGroup.planTime != null
&& PatInhosOrder.stopDateTime当天0点 < PatInhosOrderGroup.planTime
```

* @ 规则3.计划执行时间 > 停止医嘱时间 → 不显示  : <font color="#c0504d">计划执行时间大于停止医嘱时间的数据都不显示</font>

<font color="#f79646">分两种情况：1.未执行；2.非未执行</font>

```
PatInhosOrder.executeStatus != 0 非未执行状态：1.执行中；2.已执行；3.停止；4.作废

+

PatInhosOrder.executeStatus = 0 未执行状态
&& PatInhosOrder.stopDateTime != null
&& PatInhosOrder.repeatIndicator == 1 长期医嘱
&& PatInhosOrderGroup.planTime != null
&& PatInhosOrder.stopDateTime < PatInhosOrderGroup.planTime
```

* @ 规则4.末次收费次数显示 : <font color="#c0504d">计划执行时间和停止医嘱时间是同一天时，仅显示已经收费了医嘱批次信息</font>

```
PatInhosOrder.executeStatus != 0 非未执行状态：1.执行中；2.已执行；3.停止；4.作废

+

PatInhosOrder.executeStatus = 0 未执行状态
&& PatInhosOrder.repeatIndicator == 1 长期医嘱
&& PatInhosOrder.stopDateTime != null
&& PatInhosOrderGroup.planTime != null
&& !(

-- 排除情况1
&& PatInhosOrderGroup.planTime == PatInhosOrder.stopDateTime 计划执行时间和停止医嘱时间是同一天
&& PatInhosOrder.lastdayTimes == null || PatInhosOrder.lastdayTimes == 0

-- 排除情况2
&& PatInhosOrderGroup.planTime == PatInhosOrder.stopDateTime 计划执行时间和停止医嘱时间是同一天
&& PatInhosOrder.lastdayTimes != null && PatInhosOrder.lastdayTimes != 0 
&& 按照orderGroupNo分组且组元素序号大于 > PatInhosOrder.lastdayTimes

)
```

>PatInhosOrder.lastdayTimes应该就是付费次数，如果超过付费次数的医嘱表示未付费，就不做展示了！
>分组剔除的话，个人感觉肯定要按照计划执行时间排序！

# 皮试
## 执行流程

### 备药/配药

```json
// POST /WRMSMnis/dispense/dispense
// com.lachesis.windranger.controller.order.OrderDispenseController.dispense
{
    "executeItems": [
        {
            "inhosCode": "12338450",
            "orderBar": "ps@114874492203160426822946689",
            "orderGroupNo": "822946689",
            "processId": "6654436545dd724b90aed9a5",
            "processNode": "medicine_prepare",
            "processType": "skinTestMedicinePrepare"
        }
    ],
    "wardCode": "309"
}
```

关联节点：
* medicine_prepare：备药
* medicine_check：备药审核
* dispensing：配药
* dispensing_check：配药审核

### 皮试执行

### 皮试结果录入


1.扫码查询皮试执行流程

```
GET /scan/skinTest?wardCode=309&barCode=ps%40924874492203160426822946689
```

2.扫码获取医嘱信息（口服|输液|医嘱条码）

```
GET /scan/infusion?wardCode=309&orderbar=ps%40924874492203160426822946689&processType=skinTestMedicinePrepare
```

3.皮试执行

```json
POST /order/skinTest/execute

{
    "checkNurse": "8099",
    "checkTime": "2024-03-18T16:36:36.000+0800",
    "createPerson": "123",
    "createTime": "2023-05-17T13:14:34.000+0800",
    "drugBatchNo": "rrrrr",
    "execNurse": "123",
    "execTime": "2024-05-23T10:44:48.000+0800",
    "execType": "08",
    "inhosCode": "12338450",
    "orderGroupNo": "822946689",
    "orderbar": "ps@924874492203160426822946689",
    "processId": "664ea9f101b307eac72b7cb6",
    "processNode": "skinTest_execute",                   // 皮试执行
    "processType": "skinTestMedicinePrepare",
    "remindInterval": 25,
    "remindStatus": 1,
    "reportNurse": "123",
    "reportTime": "2024-03-18T16:36:36.000+0800",
    "result": "0",
    "resultMark": "+",
    "seqId": 1,
    "testStatus": 2,
    "updatePerson": "123",
    "updateTime": "2023-12-02T09:28:23.000+0800",
    "validDate": "2024-03-18T00:00:00.000+0800",
    "wardCode": "309"
}
```

4.皮试录入

```json
POST /order/skinTest/enter

{
    "checkNurse": "8099",
    "checkTime": "2024-05-23T11:05:14.000+0800",
    "checkUserCode": "1014",
    "createPerson": "123",
    "createTime": "2023-05-17T13:14:34.000+0800",
    "drugBatchNo": "rrrrr",
    "execNurse": "123",
    "execTime": "2024-05-23T10:44:48.000+0800",
    "execType": "02",
    "inhosCode": "12338450",
    "orderGroupNo": "822946689",
    "orderbar": "ps@924874492203160426822946689",
    "processId": "664ea9f101b307eac72b7cb6",
    "processNode": "skinTest_input",                   // 皮试录入
    "processType": "skinTestMedicinePrepare",
    "remindInterval": 25,
    "remindStatus": 1,
    "reportNurse": "123",
    "reportTime": "2024-03-18T16:36:36.000+0800",
    "result": "0",
    "resultMark": "+",
    "seqId": 1,
    "testStatus": 1,
    "updatePerson": "123",
    "updateTime": "2023-12-02T09:28:23.000+0800",
    "validDate": "2024-05-23T00:00:00.000+0800",
    "wardCode": "309"
}
```


# 其它整理

## 医嘱存储结构

* pat_inhos_order_group
* 检验医嘱：windranger_emr.pat_lab_master
* 输血医嘱：windranger_emr.pat_emr_blood_transfusion

## 广东省人民医院南海医院/平洲医院 - 包药机条码

配置路径：<font color="#9bbb59">配置中心 - 业务配置 - 移动护理 - 医嘱配置 - 第三方包药机条码配置</font>

![[Pasted image 20240521113514.png|500]]

![[Pasted image 20240521113529.png|500]]

## 新增用法组和流程

关联迭代任务：[[20240523_移动护理_feat_8059]]


## 特殊医嘱 <font color="#f79646">TODO</font>

