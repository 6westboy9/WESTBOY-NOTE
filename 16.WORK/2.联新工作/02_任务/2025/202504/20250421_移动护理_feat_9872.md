# 1.CR

>Java群

项目：foundation_fastdeploy  
内容：9872【湖南省妇幼保健院】智慧产房对接，新增免登 
分支：feat_master_wpb_9872 into master
MR：http://10.2.3.111:86/backend_group/backend_application/foundation_fastdeploy/merge_requests/1459
# 2.脚本

>邮件

> [!danger] 注意事项
> 提供脚本为实际线上脚本，所以必须考虑实际线上情况
> 1.开关，默认应为关闭（根据实际情况而定）
> 2.IP地址，默认应为127.0.0.1（一般情况）

---

宝哥麻烦归档下脚本：

测试环境：10.2.3.170
项目：foundation_fastdeploy
冲刺版本：9872【湖南省妇幼保健院】智慧产房对接，新增免登 
单号：9872
版本号：MNIS V3.8.134
分支：feat_master_wpb_9872

MySQL脚本

```sql

```


> [!danger] 注意事项
> 脚本后不要带 `;` ~

MongDB脚本

```js
use coms

db.sysConfigFile.remove({key:'commonThirdLoginVerify2'})
db.sysConfigFile.remove({key:'thirdLoginVerify2'})

db.sysConfigFile.insertOne({
	"key" : "commonThirdLoginVerify2",
	"pattern" : {
		"componentType" : "Tab",
		"label" : "第三方单点登录2（V3.8）",
		"forAllWards" : true
	},
	"children" : [
		{
			"_id" : "16968446904891-Mon Oct 09 2023 17:45:38 GMT+0800",
			"wardCode" : "",
			"key" : "isEnable",
			"pattern" : {
				"componentType" : "Switch",
				"label" : "是否启用"
			},
			"value" : true
		},
		{
			"_id" : "16968446904891-Mon Oct 09 2023 17:46:29 GMT+0800",
			"wardCode" : "",
			"key" : "requestType",
			"pattern" : {
				"componentType" : "Select",
				"label" : "请求类型",
				"urlOptionSourceDetail" : {
					
				},
				"optionSourceDetail" : "",
				"optionSource" : "none",
				"options" : [
					{
						"sortedIndex" : 1,
						"code" : "get",
						"name" : "get请求"
					},
					{
						"sortedIndex" : 2,
						"code" : "post",
						"name" : "post请求（表单）"
					},
					{
						"sortedIndex" : 3,
						"code" : "postByJson",
						"name" : "post请求"
					},
					{
						"sortedIndex" : 4,
						"code" : "webService",
						"name" : "webService请求"
					}
				]
			},
			"value" : "get"
		},
		{
			"_id" : "16968470381282",
			"wardCode" : "",
			"key" : "requestUrl",
			"pattern" : {
				"componentType" : "Input",
				"label" : "请求地址"
			},
			"value" : "http://10.2.3.172:10480/WRMSFoundationFD/mock/api/zhcf/getCurrentUserInfo"
		},
		{
			"_id" : "16968446904891-Mon Oct 09 2023 17:48:21 GMT+0800",
			"wardCode" : "",
			"key" : "requestHeader",
			"pattern" : {
				"description" : "例：webService: http://bjgoodwillcis.com/JHIP.SSO.BS.Service.Send 其他 {\"token\":\"#{token}\",\"appId\":\"#{appId}\"}",
				"componentType" : "TextArea",
				"label" : "请求头"
			},
			"value" : ""
		},
		{
			"_id" : "16968472825053",
			"wardCode" : "",
			"key" : "requestParam",
			"pattern" : {
				"description" : "（token二次加密后需要传加密后的data也是替换#{token}）例：{\"aa\":\"#{token}\",\"nn\":\"#{appId}\"}  或 #{token}",
				"componentType" : "TextArea",
				"label" : "请求参数"
			},
			"value" : "{\"token\":\"#{token}\"}"
		},
		{
			"_id" : "16969036186313",
			"wardCode" : "",
			"key" : "encryptKey",
			"pattern" : {
				"componentType" : "Input",
				"label" : "加密秘钥"
			},
			"value" : ""
		},
		{
			"_id" : "16969342710714",
			"wardCode" : "",
			"key" : "decryptKey",
			"pattern" : {
				"componentType" : "Input",
				"label" : "解密秘钥"
			},
			"value" : ""
		},
		{
			"_id" : "16968473335054",
			"wardCode" : "",
			"key" : "requestParamIsEncrypt",
			"pattern" : {
				"componentType" : "Switch",
				"label" : "请求参数是否加密"
			},
			"value" : false
		},
		{
			"_id" : "16968473994895",
			"wardCode" : "",
			"key" : "requestParamEncryptType",
			"pattern" : {
				"componentType" : "Select",
				"label" : "请求参数加密类型",
				"urlOptionSourceDetail" : {
					
				},
				"optionSourceDetail" : "",
				"optionSource" : "none",
				"options" : [
					{
						"sortedIndex" : 1,
						"code" : "hutool",
						"name" : "hutool"
					}
				]
			}
		},
		{
			"_id" : "16969033649311",
			"wardCode" : "",
			"key" : "requestParamEncryptFields",
			"pattern" : {
				"description" : "#token,#appId",
				"componentType" : "Input",
				"label" : "需要加密字段"
			},
			"value" : ""
		},
		{
			"_id" : "6523ce7e587e22bd443c6bf9-Mon Oct 09 2023 17:59:55 GMT+0800",
			"wardCode" : "",
			"key" : "responseType",
			"pattern" : {
				"componentType" : "Select",
				"label" : "响应类型",
				"urlOptionSourceDetail" : {
					
				},
				"optionSourceDetail" : "",
				"optionSource" : "none",
				"options" : [
					{
						"sortedIndex" : 1,
						"code" : "json",
						"name" : "对象"
					},
					{
						"sortedIndex" : 2,
						"code" : "basic",
						"name" : "字符串"
					}
				]
			},
			"value" : "json"
		},
		{
			"_id" : "16968511443587",
			"wardCode" : "",
			"key" : "responseParamIsDecrypt",
			"pattern" : {
				"componentType" : "Switch",
				"label" : "响应结果是否解密"
			},
			"value" : false
		},
		{
			"_id" : "16968512782148",
			"wardCode" : "",
			"key" : "responseParamDecryptType",
			"pattern" : {
				"componentType" : "Select",
				"label" : "响应结果解密类型",
				"urlOptionSourceDetail" : {
					
				},
				"optionSourceDetail" : "",
				"optionSource" : "none",
				"options" : [
					{
						"sortedIndex" : 1,
						"code" : "hutool",
						"name" : "hutool"
					}
				]
			},
			"value" : "hutool"
		},
		{
			"_id" : "16968532666299",
			"wardCode" : "",
			"key" : "responseParamDecryptFields",
			"pattern" : {
				"componentType" : "Input",
				"label" : "需要解密结果字段对应的key"
			},
			"value" : ""
		},
		{
			"_id" : "16968475530586",
			"wardCode" : "",
			"key" : "responseFields",
			"pattern" : {
				"description" : "webservice需要用  例子：aaa.bbb.ccc",
				"componentType" : "Input",
				"label" : "结果内容"
			},
			"value" : ""
		},
		{
			"_id" : "6523ce7e587e22bd443c6bf9-Mon Oct 09 2023 18:01:30 GMT+0800",
			"wardCode" : "",
			"key" : "parsingFields",
			"pattern" : {
				"description" : "例：webservice类型是在上一级结果内容获取之后的结果中再次获取：aa.bb.cc.dd，其他类型则是直接按照对应的路径配置：aaa.bbb.ccc",
				"componentType" : "TextArea",
				"label" : "需要解析的结果字段对应的key"
			},
			"value" : "code"
		},
		{
			"_id" : "6523ce7e587e22bd443c6bf9-Mon Oct 09 2023 18:06:47 GMT+0800",
			"wardCode" : "",
			"key" : "resultSign",
			"pattern" : {
				"description" : "例：true、成功、1001、01等",
				"componentType" : "Input",
				"label" : "响应结果标识内容"
			},
			"value" : "200"
		},
		{
			"_id" : "6523ce7e587e22bd443c6bf9-Mon Oct 09 2023 18:07:54 GMT+0800",
			"wardCode" : "",
			"key" : "resultContent",
			"pattern" : {
				"description" : "例：{\"userCode\":\"aa.bb.cc\",\"transationId\":\"aa.bb.dd\"}",
				"componentType" : "TextArea",
				"label" : "内容获取"
			},
			"value" : "{\"userCode\":\"data.userId\"}"
		},
		{
			"_id" : "5a2bd9ba1bec490db7a06110975f1b56",
			"wardCode" : "",
			"key" : "paramNameParse",
			"pattern" : {
				"description" : "将单点登录平台的参数名称转换，例:{\"source\":\"target\"}",
				"componentType" : "TextArea",
				"label" : "参数名称转换"
			},
			"value" : ""
		}
	],
	"relatedContents" : [ "authorityVerification" ],
	"updatePerson" : "123",
	"updateTime" : ISODate("2025-04-21T15:27:25.001+08:00"),
	"createTime" : ISODate("2025-04-21T11:00:00.000+08:00"),
	"createPerson" : "123",
	"_class" : "com.lachesis.windranger.foundation.model.config.SysConfigFile"
})


db.sysConfigFile.insertOne({
	"key" : "thirdLoginVerify2",
	"pattern" : {
		"componentType" : "Tab",
		"label" : "第三方登录验证2",
		"forAllWards" : true
	},
	"children" : [
		{
			"_id" : "16768899531381-Mon Feb 20 2023 18:46:51 GMT+0800",
			"wardCode" : "",
			"key" : "verifyConfig",
			"pattern" : {
				"componentType" : "TextArea",
				"label" : "验证配置"
			},
			"value" : "{\"userCode\":\"ECARD\",\"cryptKey\":\"NG7P3TCTHINLHNUS\",\"url\":\"http://192.168.10.60:8899/auth/execute\"}"
		}
	],
	"relatedContents" : [ "authorityVerification" ],
	"updatePerson" : "123",
	"updateTime" : ISODate("2025-04-21T11:00:00.000+08:00"),
	"createTime" : ISODate("2023-04-21T11:00:00.000+08:00"),
	"createPerson" : "123",
	"_class" : "com.lachesis.windranger.foundation.model.config.SysConfigFile"
})
```

# 3.提测单

>提测群

http://10.2.3.109:1024/zentao/testtask-view-9309.html
9872【湖南省妇幼保健院】智慧产房对接，新增免登 

# 4.其它





