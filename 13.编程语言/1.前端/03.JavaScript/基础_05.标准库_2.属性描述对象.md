# 1.概述

JavaScript提供了一个内部数据结构，用来描述对象的属性，控制它的行为，比如该属性是否可写、可遍历等等。这个内部数据结构称为“**属性描述对象**”（attributes object）。每个属性都有自己对应的属性描述对象，保存该属性的一些元信息。


下面是属性描述对象的一个例子。

```js
{
  value: 123,
  writable: false,
  enumerable: true,
  configurable: false,
  get: undefined,
  set: undefined
}
```

属性描述对象提供6个元属性：
1. *value*是该属性的属性值，默认为undefined。
2. *writable*是一个布尔值，表示属性值（value）是否可改变（即是否可写），默认为true。
3. *enumerable*是一个布尔值，表示该属性是否可遍历，默认为true。如果设为false，会使得某些操作跳过该属性，比如for...in循环、Object.keys。
4. *configurable*是一个布尔值，表示属性的可配置性，默认为true。如果设为false，将阻止某些操作改写属性描述对象，比如无法删除该属性，也不得改变各种元属性（value属性除外）。也就是说，configurable属性控制了属性描述对象的可写性。
5. *get*是一个函数，表示该属性的取值函数（getter），默认为undefined。
6. *set*是一个函数，表示该属性的存值函数（setter），默认为undefined。

# 2.Object.getOwnPropertyDescriptor

Object.getOwnPropertyDescriptor方法可以获取属性描述对象。它的第一个参数是目标对象，第二个参数是一个字符串，对应目标对象的某个属性名。

```js
var obj = { p: 'a' };

Object.getOwnPropertyDescriptor(obj, 'p')
// Object { value: "a",
//   writable: true,
//   enumerable: true,
//   configurable: true
// }
```

上面代码中，Object.getOwnPropertyDescriptor方法获取obj.p的属性描述对象。

> [!important] 注意：Object.getOwnPropertyDescriptor方法只能用于对象自身的属性，不能用于继承的属性。

```js
var obj = { p: 'a' };

Object.getOwnPropertyDescriptor(obj, 'toString')
// undefined
```

# 3.Object.getOwnPropertyNames

Object.getOwnPropertyNames方法返回一个数组，成员是参数对象自身的全部属性的属性名，**不管该属性是否可遍历**。

```js
var obj = Object.defineProperties({}, {
  p1: { value: 1, enumerable: true },
  p2: { value: 2, enumerable: false }
});

Object.getOwnPropertyNames(obj)
// ["p1", "p2"]
```

上面代码中，obj.p1是可遍历的，obj.p2是不可遍历的。Object.getOwnPropertyNames会将它们都返回。

>[!important] 与Object.keys的行为不同，Object.keys只返回对象自身的可遍历属性的全部属性名。

```js
Object.keys([]) // []
Object.getOwnPropertyNames([]) // [ 'length' ]

Object.keys(Object.prototype) // []
Object.getOwnPropertyNames(Object.prototype)
// ['hasOwnProperty',
//  'valueOf',
//  'constructor',
//  'toLocaleString',
//  'isPrototypeOf',
//  'propertyIsEnumerable',
//  'toString']
```

