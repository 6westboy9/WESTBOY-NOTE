# React 简明教程 - 第二节：从零构建表单

本节通过一个登录表单示例，学习 React 中的表单处理、受控组件和事件处理。

## 项目结构

```
demo-02/
├── index.html    # HTML 入口文件
├── main.js       # React 组件逻辑
└── style.css     # 样式文件
```

---

## 1. HTML 入口文件 (index.html)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Demo 02</title>
    <!-- React 核心库（负责组件逻辑） -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <!-- ReactDOM 库（负责将组件渲染到浏览器 DOM） -->
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel 的独立版本（用于转译 JSX 语法，让浏览器能识别 React 的标签写法） -->
    <script type="text/javascript" src="https://unpkg.com/babel-standalone@6/babel.js"></script>
    <link rel="stylesheet" href="./style.css" />
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="./main.js"></script>
</body>
</html>
```

> **注意**：相比第一节，本节引入了独立的 CSS 样式文件。

---

## 2. React 组件代码 (main.js)

```javascript
function AppContent() {
    // 定义两个状态：用户名和密码
    const [username, setUsername] = React.useState("");
    const [password, setPassword] = React.useState("");

    function handleSubmit(event) {
        // ⏺ event.preventDefault() 的作用
        //
        //   阻止浏览器的默认行为。
        //
        //   在这个表单提交场景中：
        //   ┌────────────────────────────────────┬────────────────────────────┐
        //   │        有 preventDefault()         │   没有 preventDefault()    │
        //   ├────────────────────────────────────┼────────────────────────────┤
        //   │ 页面不刷新，由 JavaScript 处理逻辑     │ 页面会刷新（表单默认行为）     │
        //   ├────────────────────────────────────┼────────────────────────────┤
        //   │ 可以执行验证、console.log 等操作      │ 这些代码执行后页面立即刷新      │
        //   ├────────────────────────────────────┼────────────────────────────┤
        //   │ 适合 SPA（单页应用）场景              │ 传统多页面应用行为            │
        //   └────────────────────────────────────┴────────────────────────────┘
        //
        //   具体来说：
        //
        //   当用户点击 <button type="submit"> 时，浏览器默认会：
        //   1. 收集表单数据
        //   2. 向 action 属性指定的 URL 发送请求（如果有）
        //   3. 刷新页面
        //
        //   调用 event.preventDefault() 后，表单不会提交、页面不会刷新，
        //   你可以完全用 JavaScript（React）来控制后续逻辑。
        event.preventDefault();

        // 表单验证：检查用户名和密码是否为空
        if (username === "" || password === "") {
            alert('"username" and "password" are required');
            return;
        }

        // 模拟提交：在控制台输出数据
        console.log("username: ", username);
        console.log("password: ", password);

        // 提交成功后清空表单
        setUsername("");
        setPassword("");
    }

    // JSX syntax
    return (
        <main>
            <h2>Login Form</h2>
            <form
                onSubmit={handleSubmit}
                {/* 标签中的样式需要使用驼峰（传统在HTML中是text-align） */}
                style={{ textAlign: "center" }}
            >
                <input
                    {/* 传统在HTML标签中的写法：class="input"，React中需要使用className */}
                    className="input"
                    type="text"
                    {/*记得绑定修改后的值，用于页面显示*/}
                    value={username}
                    onChange={(event) => setUsername(event.target.value)}
                />
                <br />
                <input
                    className="input"
                    type="password"
                    value={password}
                    onChange={(event) => setPassword(event.target.value)}
                />
                <br />
                <button type="submit" className="btn">
                    Login
                </button>
            </form>
        </main>
    );
}

// 通过 document.querySelector("#root") 获取页面中的挂载容器
const appEl = document.querySelector('#root');
// 用 ReactDOM.createRoot() 创建 React 的 "根节点"（React 18 的新渲染方式）
const root = ReactDOM.createRoot(appEl);
// 最后通过 root.render() 把 AppContent 组件渲染到挂载容器中
root.render(<AppContent/>);
```

---

## 3. 样式文件 (style.css)

```css
.input {
  margin: 2px;
}

.btn {
  margin: 1rem;
}

h2 {
  text-align: center;
}

main {
  border: 1px solid black;
}
```

---

## 4. 核心概念解析

### 4.1 受控组件 (Controlled Component)

```javascript
<input
    value={username}
    onChange={(event) => setUsername(event.target.value)}
/>
```

**什么是受控组件？**

React 中，表单元素的值由 React 状态控制，称为**受控组件**。

| 特性 | 说明 |
|---|---|
| `value={username}` | 输入框的值绑定到状态 |
| `onChange` | 每次输入都更新状态 |
| 单一数据源 | 状态成为唯一的数据来源 |

**数据流向：**

```
用户输入 → onChange 事件 → setUsername 更新状态 → 重新渲染 → 显示新值
```

### 4.2 表单提交处理

```javascript
function handleSubmit(event) {
    event.preventDefault();  // 阻止页面刷新
    // 表单验证和提交逻辑
}
```

| 方法 | 作用 |
|---|---|
| `event.preventDefault()` | 阻止表单默认提交行为（页面刷新） |
| 表单验证 | 在提交前检查数据合法性 |
| 清空表单 | 提交成功后重置状态 |

### 4.3 React 与 HTML 的语法差异

| HTML 传统写法 | React 写法 | 说明 |
|---|---|---|
| `class="input"` | `className="input"` | `class` 是 JS 保留字 |
| `style="text-align: center"` | `style={{ textAlign: "center" }}` | 样式对象，驼峰命名 |
| `onclick` | `onClick` | 事件名驼峰命名 |

---

## 5. 运行效果

| 场景 | 行为 |
|---|---|
| 输入用户名/密码 | 实时更新状态 |
| 点击 Login（有数据） | 控制台输出，清空表单 |
| 点击 Login（无数据） | 弹出提示，不提交 |

---

## 6. 小结

本节学习了：

1. ✅ **受控组件** - 表单值由 React 状态控制
2. ✅ **双向绑定** - `value` + `onChange` 实现数据同步
3. ✅ **表单提交** - `onSubmit` + `preventDefault()`
4. ✅ **React 语法差异** - `className`、`style` 对象、事件驼峰命名
5. ✅ **表单验证** - 提交前检查数据
6. ✅ **引入 CSS** - 使用外部样式文件
