# 1.三大生命周期


Maven将项目的<font color="#f79646">生命周期抽象成了3套生命周期</font>，每套生命周期又包含多个阶段，每套中具体包含哪些阶段是Maven已经约定好的，但是每个阶段具体需要做什么，是用户可以自己指定的。

* clean生命周期
* default生命周期
* site生命周期

<font color="#f79646">上面这3套生命周期是相互独立的</font>，没有依赖关系的，而每套生命周期中有多个阶段，<font color="#f79646">每套中的多个阶段是有先后顺序的</font>，并且后面的阶段依赖于前面的阶段。

## 1.1.clean生命周期

| 生命周期阶段     | 描述                    |
| ---------- | --------------------- |
| pre-clean  | 执行一些需要在clean之前完成的工作   |
| clean      | 移除所有上一次构建生成的文件        |
| post-clean | 执行一些需要在clean之后立刻完成的工作 |

## 1.2.default生命周期

 
这个是Maven主要的生命周期，主要被用于构建应用，包含了<font color="#f79646">23</font>个阶段。

| 生命周期阶段            | 描述                                                                       |
| ----------------------- | -------------------------------------------------------------------------- |
| validate                | 校验：校验项目是否正确并且所有必要的信息可以完成项目的构建过程。           |
| initialize              | 初始化：初始化构建状态，比如设置属性值。                                   |
| generate-sources        | 生成源代码：生成包含在编译阶段中的任何源代码。                             |
| process-sources         | 处理源代码：处理源代码，比如说，过滤任意值。                               |
| generate-resources      | 生成资源文件：生成将会包含在项目包中的资源文件。                           |
| process-resources       | 编译：复制和处理资源到目标目录，为打包阶段最好准备。                       |
| compile                 | 处理类文件：编译项目的源代码。                                             |
| process-classes         | 处理类文件：处理编译生成的文件，比如说对Java class文件做字节码改善优化。   |
| generate-test-sources   | 生成测试源代码：生成包含在编译阶段中的任何测试源代码。                     |
| process-test-sources    | 处理测试源代码：处理测试源代码，比如说，过滤任意值。                       |
| generate-test-resources | 生成测试源文件：为测试创建资源文件。                                       |
| process-test-resources  | 处理测试源文件：复制和处理测试资源到目标目录。                             |
| test-compile            | 编译测试源码：编译测试源代码到测试目标目录.                                |
| process-test-classes    | 处理测试类文件：处理测试源码编译生成的文件。                               |
| test                    | 测试：使用合适的单元测试框架运行测试（Juint是其中之一）。                  |
| prepare-package         | 准备打包：在实际打包之前，执行任何的必要的操作为打包做准备。               |
| package                 | 打包：将编译后的代码打包成可分发格式的文件，比如JAR、WAR或者EAR文件。      |
| pre-integration-test    | 集成测试前：在执行集成测试前进行必要的动作。比如说，搭建需要的环境。       |
| integration-test        | 集成测试：处理和部署项目到可以运行集成测试环境中。                         |
| post-integration-test   | 集成测试后：在执行集成测试完成后进行必要的动作。比如说，清理集成测试环境。 |
| verify                  | 验证：运行任意的检查来验证项目包有效且达到质量标准。                       |
| install                 | 安装：安装项目包到本地仓库，这样项目包可以用作其他本地项目的依赖。         |
| deploy                  | 部署：将最终的项目包复制到远程仓库中与其他开发者和项目共享。               |

## 1.3.site生命周期

site生命周期的目的是建立和发布项目站点，Maven能够基于pom.xml所包含的信息，自动生成一个友好的站点，方便团队交流和发布项目信息。主要包含以下4个阶段：

|阶段|描述|
|---|---|
|pre-site|执行一些需要在生成站点文档之前完成的工作|
|site|生成项目的站点文档|
|post-site|执行一些需要在生成站点文档之后完成的工作，并且为部署做准备|
|site-deploy|将生成的站点文档部署到特定的服务器上|

从命令行执行Maven任务的最主要方式就是调用Maven生命周期的阶段，需要注意的是，每套生命周期是相互独立的，但是每套生命周期中阶段是有前后依赖关系的，执行某个的时候，会按序先执行其前面所有的。

## 1.4.常用命令


mvn执行阶段的命令格式是：

```
mvn 阶段1 [阶段2] [阶段n]
```

下面我们举一些常见的例子来说明一下：

### mvn clean


### mvn compile


### mvn test


### mvn clean install


### mvn clean package -DskipTests



# 2.插件

Maven插件主要是为Maven中生命周期中的阶段服务的，Maven中只是定义了3套生命周期，以及每套生命周期中有哪些阶段，<font color="#f79646">具体每个阶段中执行什么操作，完全是交给插件去干的</font>。

Maven中的插件就相当于一些工具，比如编译代码的工具，运行测试用例的工具，打包代码的工具，将代码上传到本地仓库的工具，将代码部署到远程仓库的工具等等，这些都是Maven中的插件。

插件可以通过mvn命令的方式调用直接运行，或者将插件和Maven生命周期的阶段进行绑定，然后通过mvn阶段的方式执行阶段的时候，会自动执行和这些阶段绑定的插件。

## 2.1.插件目标

Maven中的插件以jar的方式存在于仓库中，通过坐标进行访问。

* 每个插件中可能为了代码可以重用，一个插件可能包含了多个功能，比如编译代码的插件，可以编译源代码、也可以编译测试代码；
* <span style="background:#fff88f">插件中的每个功能就叫做<font color="#f79646">插件的目标</font>（Plugin Goal）</span>，<font color="#f79646">每个插件中可能包含一个或者多个插件目标</font>（Plugin Goal）。

### 目标参数

插件目标是用来执行任务的，那么执行任务肯定是有参数配的，这些就是目标的参数，每个插件目标对应于java中的一个类，参数就对应于这个类中的属性。

### 查看插件所有目标

命令格式：

```
$ mvn 插件goupId:插件artifactId[:插件version]:help
$ mvn 插件前缀:help
```

示例：

```
$ mvn org.apache.maven.plugins:maven-clean-plugin:help                               # 等价于mvn clean:help
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------< org.apache.maven:standalone-pom >-------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] --------------------------------[ pom ]---------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:help (default-cli) @ standalone-pom ---
[INFO] org.apache.maven.plugins:maven-clean-plugin:2.5

Maven Clean Plugin
  The Maven Clean Plugin is a plugin that removes files generated at build-time
  in a project's directory.

This plugin has 2 goals:

clean:clean
  Goal which cleans the build.
  This attempts to clean a project's working directory of the files that were
  generated at build-time. By default, it discovers and deletes the directories
  configured in project.build.directory, project.build.outputDirectory,
  project.build.testOutputDirectory, and project.reporting.outputDirectory.

  Files outside the default may also be included in the deletion by configuring
  the filesets tag.

clean:help
  Display help information on maven-clean-plugin.
  Call
    mvn clean:help -Ddetail=true -Dgoal=<goal-name>
  to display parameter details.
```

上面列出了maven-clean-plugin这个插件所有的目标，有2个，分别是clean:clean和clean:help，分号后面的部分是目标名称，分号前面的部分是插件的前缀，每个目标的后面包含对这个目标的详细解释说明，关于前缀的后面会有详细介绍。

### 查看插件目标参数列表

```
$ mvn 插件goupId:插件artifactId[:插件version]:help -Dgoal=目标名称 -Ddetail
$ mvn 插件前缀:help -Dgoal=目标名称 -Ddetail
```

上面命令中的-Ddetail用户输出目标详细的参数列表信息，如果没有这个，目标的参数列表不会输出出来。

```
$ mvn org.apache.maven.plugins:maven-clean-plugin:help -Dgoal=help -Ddetail
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------< org.apache.maven:standalone-pom >-------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] --------------------------------[ pom ]---------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.5:help (default-cli) @ standalone-pom ---
[INFO] org.apache.maven.plugins:maven-clean-plugin:2.5

Maven Clean Plugin
  The Maven Clean Plugin is a plugin that removes files generated at build-time
  in a project's directory.

clean:help
  Display help information on maven-clean-plugin.
  Call
    mvn clean:help -Ddetail=true -Dgoal=<goal-name>
  to display parameter details.

  Available parameters:

    detail (Default: false)
      If true, display all settable properties for each goal.
      Expression: ${detail}

    goal
      The name of the goal for which to show help. If unspecified, all goals
      will be displayed.
      Expression: ${goal}

    indentSize (Default: 2)
      The number of spaces per indentation level, should be positive.
      Expression: ${indentSize}

    lineLength (Default: 80)
      The maximum length of a display line, should be positive.
      Expression: ${lineLength}
```

上面列出了clean插件的help目标的详细参数信息。

### 命令行运行插件

```
mvn 插件goupId:插件artifactId[:插件version]:插件目标 [-D目标参数1] [-D目标参数2] [-D目标参数n]
mvn 插件前缀:插件目标  [-D目标参数1] [-D目标参数2] [-D目标参数n]
```

案例：

Maven中运行<font color="#f79646">测试用例</font>使用到的插件坐标是：

```xml
<dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12.4</version>
</dependency>
```

我们看一下这个插件有哪些目标：

```
D:\code\IdeaProjects\maven-chat06>mvn org.apache.maven.plugins:maven-surefire-plugin:help
[INFO] Scanning for projects...
[INFO]
[INFO] -------------------< com.javacode2018:maven-chat06 >--------------------
[INFO] Building maven-chat06 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-surefire-plugin:2.12.4:help (default-cli) @ maven-chat06 ---
[INFO] Maven Surefire Plugin 2.12.4
  Surefire is a test framework project.
This plugin has 2 goals:
surefire:help
  Display help information on maven-surefire-plugin.
  Call mvn surefire:help -Ddetail=true -Dgoal=<goal-name> to display parameter
  details.
surefire:test
  Run tests using Surefire.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  0.662 s
[INFO] Finished at: 2019-11-18T15:26:26+08:00
[INFO] ------------------------------------------------------------------------
```


### 插件传参的2种方式


### 获取插件目标详细描述信息的另外一种方式


## 2.2.插件前缀


>运行插件的时候，可以通过指定插件坐标的方式运行，但是插件的坐标信息过于复杂，也不方便写和记忆，所以maven中给插件定义了一些简捷的插件前缀，可以通过插件前缀来运行指定的插件。

可以通过下面命令查看到插件的前缀：

```
mvn help:describe -Dplugin=插件goupId:插件artifactId[:插件version]
```

示例效果：

```
D:\code\IdeaProjects\maven-chat06>mvn help:describe -Dplugin=org.apache.maven.plugins:maven-surefire-plugin
[INFO] Scanning for projects...
[INFO]
[INFO] -------------------< com.javacode2018:maven-chat06 >--------------------
[INFO] Building maven-chat06 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-help-plugin:3.2.0:describe (default-cli) @ maven-chat06 ---
[INFO] org.apache.maven.plugins:maven-surefire-plugin:2.12.4
Name: Maven Surefire Plugin
Description: Surefire is a test framework project.
Group Id: org.apache.maven.plugins
Artifact Id: maven-surefire-plugin
Version: 2.12.4
Goal Prefix: surefire
```

输出中的Goal Prefix:部分对应的就是插件的前缀，上面这个插件的前缀是surefire。

我们使用前缀来运行一下插件感受一下效果：

```
D:\code\IdeaProjects\maven-chat06>mvn surefire:test
[INFO] Scanning for projects...
[INFO]
[INFO] -------------------< com.javacode2018:maven-chat06 >--------------------
[INFO] Building maven-chat06 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-surefire-plugin:2.12.4:test (default-cli) @ maven-chat06 ---
[INFO] Tests are skipped.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  0.934 s
[INFO] Finished at: 2019-11-18T16:18:42+08:00
[INFO] ------------------------------------------------------------------------
```

上面通过别名来运行插件maven-surefire-plugin的test目标，是不是简洁了很多。

上面用了很多mvn help:这个命令，这个调用的是maven-help-plugin插件的功能，help是插件的前缀，它的坐标是：

```xml
<dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-help-plugin</artifactId>
    <version>3.2.0</version>
</dependency>
```

## 2.3.插件和生命周期阶段绑定

Maven只是定义了生命周期中的阶段，而没有定义每个阶段中具体的实现，这些实现是由插件的目标来完成的，所以<font color="#f79646">需要将阶段和插件目标进行绑定</font>，来让插件目标帮助生命周期的阶段做具体的工作，生命周期中的每个阶段支持绑定多个插件的多个目标。

## 2.4.Maven内置插件以及绑定

Maven为了让我们不用做任何配置就可以实现一些项目的构建操作，比如运行mvn clean就可以帮我们清理代码，运行mvn install就可以将构件安装到本地仓库，所以maven帮我们做了一些事情，<font color="#f79646">Maven内部已经提供了很多默认的插件</font>，而将一些阶段默认和这些插件阶段绑定好了，所以我们不用做任何配置就可以执行清理代码、编译代码、测试、打包、安装到本地仓库、上传到远程仓库等阶段的操作。这些都是Maven内置绑定帮我们做的事情，我们来看看Maven有哪些内置绑定。

### clean生命周期阶段与插件绑定关系

| 生命周期阶段     | 插件:目标                    |
| ---------- | ------------------------ |
| pre-clean  |                          |
| clean      | maven-clean-plugin:clean |
| post-clean |                          |

>clean周期中只有clean阶段默认绑定了maven-clean-plugin插件的clean目标。maven-clean-plugin插件的clean目标作用就是删除项目的输出目录。

### default生命周期阶段与插件绑定关系

default生命周期中有23个阶段，我只列出有默认绑定的，其他的没有列出的没有绑定任何插件，因此没有任何实际的行为。

|生命周期阶段|插件:目标|执行任务|
|---|---|---|
|process-resources|maven-resources-plugin:resources|复制主资源文件至主输出目录|
|compile|maven-compiler-plugin:compile|编译主代码至主输出目录|
|process-test-resources|maven-resources-plugin:testResources|复制测试资源文件至测试输出目录|
|test-compile|maven-compiler-plugin:testCompile|编译测试代码至测试输出目录|
|test|maven-surefile-plugin:test|执行测试用例|
|package|maven-jar-plugin:jar|创建项目jar包|
|install|maven-install-plugin:install|将输出构件安装到本地仓库|
|deploy|maven-deploy-plugin:deploy|将输出的构件部署到远程仓库|

### site生命周期阶段与插件绑定关系

| 生命周期阶段      | 插件:目标                    |
| ----------- | ------------------------ |
| pre-site    |                          |
| site        | maven-site-plugin:site   |
| post-site   |                          |
| site-deploy | maven-site-plugin:deploy |


## 2.5.自定义绑定


除了默认绑定的一些操作，我们自己可以在一些阶段上绑定指定的插件目标来完成一些操作，这种自定义绑定让maven项目在构件的过程中可以执行更多更丰富的操作。

### 插件的自定义绑定

常见的一个案例是：创建项目的源码jar包，将其安装到仓库中，内置插件绑定关系中没有涉及到这一步的任务，所以需要用户自己配置。

插件maven-source-plugin的jar-no-fork可以帮助我们完成该任务，我们将这个目标绑定在default生命周期的verify阶段上面，这个阶段没有任何默认绑定，verify是在测试完成之后并将构件安装到本地仓库之前执行的阶段，在这个阶段我们生成源码，配置如下：

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <version>3.2.0</version>
            <executions>
                <!-- 使用插件需要执行的任务 -->
                <execution>
                    <!-- 任务id -->
                    <id>attach-source</id>
                    <!-- 任务中插件的目标，可以指定多个 -->
                    <goals>
                        <goal>jar-no-fork</goal>
                    </goals>
                    <!-- 绑定的阶段 -->
                    <phase>verify</phase>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

>注意上面配置的attach-source，后面输出中会有。
>id：任务的id，需唯一，如果不指定，默认为default。
>每个插件的配置在pom.xml的plugins元素中只能写一次，否则会有警告。

```
D:\code\IdeaProjects\maven-chat06>mvn install
[INFO] Scanning for projects...
[INFO]
[INFO] -------------------< com.javacode2018:maven-chat06 >--------------------
[INFO] Building maven-chat06 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ maven-chat06 ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ maven-chat06 ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ maven-chat06 ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO]
[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ maven-chat06 ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ maven-chat06 ---
[INFO]
[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ maven-chat06 ---
[INFO]
[INFO] --- maven-source-plugin:3.2.0:jar-no-fork (attach-source) @ maven-chat06 ---                       <======== 最终效果！！！
[INFO]
[INFO] --- maven-install-plugin:2.4:install (default-install) @ maven-chat06 ---
[INFO] Installing D:\code\IdeaProjects\maven-chat06\target\maven-chat06-1.0-SNAPSHOT.jar to C:\Users\Think\.m2\repository\com\javacode2018\maven-chat06\1.0-SNAPSHOT\maven-chat06-1.0-SNAPSHOT.jar
[INFO] Installing D:\code\IdeaProjects\maven-chat06\pom.xml to C:\Users\Think\.m2\repository\com\javacode2018\maven-chat06\1.0-SNAPSHOT\maven-chat06-1.0-SNAPSHOT.pom
[INFO] Installing D:\code\IdeaProjects\maven-chat06\target\maven-chat06-1.0-SNAPSHOT-sources.jar to C:\Users\Think\.m2\repository\com\javacode2018\maven-chat06\1.0-SNAPSHOT\maven-chat06-1.0-SNAPSHOT-sources.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  2.268 s
[INFO] Finished at: 2019-11-18T16:59:12+08:00
[INFO] ------------------------------------------------------------------------
```

上面有个输出如下：

```
maven-source-plugin:3.2.0:jar-no-fork (attach-source) @ maven-chat06 ---
```

可以看出调用了我们配置的插件生成源码jar，<font color="#f79646">上面的括号中的attach-source就是pom.xml中配置的任务id</font>。

最后有个输出：

```
[INFO] Installing D:\code\IdeaProjects\maven-chat06\target\maven-chat06-1.0-SNAPSHOT-sources.jar to C:\Users\Think\.m2\repository\com\javacode2018\maven-chat06\1.0-SNAPSHOT\maven-chat06-1.0-SNAPSHOT-sources.jar
```

可以看到将源码安装到本地仓库了。

### 插件的默认绑定

>[!tips] 有些插件的目标默认会绑定到一些生命周期的阶段中，那么如果刚好插件默认绑定的阶段和上面配置的一致，那么上面phase元素可以不写了，那么怎么查看插件的默认绑定呢？

```
mvn help:describe -Dplugin=插件goupId:插件artifactId[:插件version] -Dgoal=目标名称 -Ddetail
mvn help:describe -Dplugin=插件前缀 -Dgoal=目标名称 -Ddetail
```

我们看一下插件source的jar-no-fork目标默认的绑定：

```
D:\code\IdeaProjects\maven-chat06>mvn help:describe -Dplugin=source -Dgoal=jar-no-fork -Ddetail
[INFO] Scanning for projects...
[INFO]
[INFO] -------------------< com.javacode2018:maven-chat06 >--------------------
[INFO] Building maven-chat06 1.0-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO]
[INFO] --- maven-help-plugin:3.2.0:describe (default-cli) @ maven-chat06 ---
[INFO] Mojo: 'source:jar-no-fork'
source:jar-no-fork
  Description: This goal bundles all the sources into a jar archive. This
    goal functions the same as the jar goal but does not fork the build and is
    suitable for attaching to the build lifecycle.
  Implementation: org.apache.maven.plugins.source.SourceJarNoForkMojo
  Language: java
  Bound to phase: package
```

上面输出中有个Bound to phase: package，表示默认绑定在了package阶段上。

<span style="background:#fff88f">我们知道3套生命周期的运行时没有依赖的，但是每套中的阶段是有先后顺序的，运行某个阶段的时候，会先执行他前面所有的阶段。</span><font color="#f79646">清理代码使用的是clean周期中的clean阶段，编译代码用的是default周期中的compile阶段，当直接运行mvn compile编译代码的时候并不会去清理代码</font>，编译代码的时候若发现文件没有变动，会跳过没有变化的文件进行编译。如果我们想每次编译之前强制先清理代码，我们经常这么写：

```
mvn clean compile
```

><font color="#f79646">还有其他方式么？</font>--- 借助自定义绑定实现清理代码

我们刚才学了自定义绑定，我们可以在default生命周期的第一个阶段validate绑定清理代码的插件，那我们来通过自定义绑定来实现一下，project->build->plugins元素中加入下面配置：

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.5</version>
    <executions>
        <!-- 使用插件需要执行的任务 -->
        <execution>
            <!-- 任务中插件的目标，可以指定多个 -->
            <id>clean-target</id>
            <goals>
                <goal>clean</goal>
            </goals>
            <!-- 绑定的阶段 -->
            <phase>validate</phase>
        </execution>
    </executions>
</plugin>
```

此时只需要执行mvn compile就可以执行清理代码了，而不需要每次都写clean了。

## 2.6.POM文件插件配置详解

### 插件目标共享参数配置

参数配置格式：

```xml
<configuration>
    <目标参数名>参数值</目标参数名>
</configuration>
```

build->plugins->plugin中配置：

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <!-- 插件参数配置，对插件中所有的目标起效 -->
            <configuration>
                <skip>true</skip>
            </configuration>
        </plugin>
    </plugins>
</build>
```


### 插件目标参数配置

参数配置格式：

```xml
<configuration>
    <目标参数名>参数值</目标参数名>
</configuration>
```

project->build->plugins->plugin->executions->execution元素中进行配置：

```xml
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <executions>
                <execution>
                    <goals>
                        <goal>test</goal>
                        <goal>help</goal>
                    </goals>
                    <phase>pre-clean</phase>
                    <!-- 这个地方配置只对当前任务有效 -->
                    <configuration>
                        <skip>true</skip>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

## 2.7.获取Maven插件信息

上面我们介绍了，可以通过下面命令获取插件目标详细介绍信息：

```
mvn help:describe -Dplugin=插件goupId:插件artifactId[:插件version] -Dgoal=目标名称 -Ddetail
mvn help:describe -Dplugin=插件前缀 -Dgoal=目标名称 -Ddetail
```

更多maven插件的帮助文档可以参考maven的官方网站，上面有详细的介绍，建议大家去看看，地址：http://maven.apache.org/plugins

## 2.8. 插件解析机制


### 插件仓库


### 插件的默认groupId


### 插件前缀的解析


## 2.9.查看项目最终POM文件



# 3.fat-jar


# 4.常用插件


## 4.1.maven-source-plugin

官网：

功能：构建xxx-source.jar源码包。

## 4.2.maven-assembly-plugin

官网：

功能：将项目中的依赖项、模块、文档和其它任意文件一起组装成一个可分发的归档文件，格式如zip、gz、jar等，可用于制作fat-jar。
## 4.3.maven-shade-plugin

官网：https://maven.apache.org/plugins/maven-shade-plugin

功能：<font color="#4bacc6">功能类似assembly</font>，但支持依赖包的重命名（避免版本冲突），配置文件的追加等等，可用于制作fat-jar。

```
$ mvn org.apache.maven.plugins:maven-shade-plugin:help
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------< org.apache.maven:standalone-pom >-------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] --------------------------------[ pom ]---------------------------------
[INFO]
[INFO] --- maven-shade-plugin:3.5.0:help (default-cli) @ standalone-pom ---
[INFO] Apache Maven Shade Plugin 3.5.0
  Repackages the project classes together with their dependencies into a single
  uber-jar, optionally renaming classes
   or removing unused classes.

This plugin has 2 goals:

shade:help
  Display help information on maven-shade-plugin.
  Call mvn shade:help -Ddetail=true -Dgoal=<goal-name> to display parameter
  details.

shade:shade
  Mojo that performs shading delegating to the Shader component.


[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  0.322 s
[INFO] Finished at: 2023-11-14T13:42:16+08:00
[INFO] ------------------------------------------------------------------------
```

## 4.4.maven-antrun-plugin


关于ant相关的语法和使用可以参考：[ANT教程](https://www.yiibai.com/ant)

样例：

```xml
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-antrun-plugin</artifactId>
    <executions>
        <execution>
            <id>package</id>
            <phase>package</phase>
            <goals>
                <goal>run</goal>
            </goals>
            <configuration>
                <target>
                    <echo message="start.................................."/>
                    <echo message="${project.artifactId}-${project.version}.jar"/>
                    <taskdef resource="net/sf/antcontrib/antcontrib.properties" classpathref="maven.runtime.classpath"/>
                    <if>
                        <equals arg1="${project.packaging}" arg2="jar"/>
                        <then>
                            <copy todir="${plugin.dest.dir}">
                                <fileset dir="${project.build.directory}">
                                    <include name="${project.artifactId}-${project.version}.jar"/>
                                    <!-- <exclude name="puma-jdbc-commons-1.0.jar"/> -->
                                </fileset>
                            </copy>
                        </then>
                    </if>
                    <echo message="end...................................."/>
                </target>
            </configuration>
        </execution>
    </executions>
    <dependencies>
        <dependency>
            <groupId>ant-contrib</groupId>
            <artifactId>ant-contrib</artifactId>
            <version>${ant-contrib.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>ant</groupId>
                    <artifactId>ant</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.ant</groupId>
            <artifactId>ant-nodeps</artifactId>
            <version>${ant-nodeps.version}</version>
        </dependency>
    </dependencies>
</plugin>
```

## 4.5.spring-boot-maven-plugin


