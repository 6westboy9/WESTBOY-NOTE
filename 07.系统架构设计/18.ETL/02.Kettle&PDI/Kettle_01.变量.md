# 变量分类

- 系统变量：程序启动时加载的【<font color="#0070c0">用户目录/.kettle/kettle.properties</font>】配置文件中的变量。<font color="#f79646">修改配置需要重启程序才能生效 -- 全局变量</font>
- 自定义变量：对应【<font color="#0070c0">转换→核心对象→作业→设置变量</font>】和【<font color="#0070c0">作业→通用→设置变量</font>】组件 -- <font color="#f79646">局部变量</font>
- 环境变量：环境变量指的是当前脚本文件中出现的所有变量，包括系统变量、自定义变量以及环境变量自身定义的变量。

>系统变量和自定义变量的最大区别：系统变量是在文件中定义的，对所有脚本文件都始终有效；自定义变量是在脚本中定义的，只有定义后才能使用，其有效范围和范围参数有关~

# 变量使用


## 转换-设置变量


变量的作用范围

| 类型                                | 说明                     | 级别  |
| --------------------------------- | ---------------------- | --- |
| Valid in the Java Virtual Machine | 在同一个Java虚拟机下运行的作业和转换生效 | 系统级 |
| Valid in the parent job           | 在当前作业下生效               | 作业级 |
| Valid in the grant-parent job     | 当前作业的父作业下生效            | 作业级 |
| Valid in the root job             | 凡是在根作业下运行的都生效          | 作业级 |

> [!important] 
> - 变量的有效范围，超过使用范围后就无法使用了~
> - <font color="#f79646">在本次转换中定义的变量，在本次转换中不生效~</font>

在设置变量的时候会弹出如下提示

![[Pasted image 20240417143407.png|400]]

>翻译：请记住，您在此步骤中定义的变量无法在此转换中使用。这是因为<font color="#c0504d">转换中的所有步骤都是并行运行的</font>，没有特定的执行顺序。

一般用法

- 保存前一个步骤的结果值，在其它步骤中使用。
- 在循环执行中通过对变量赋值实现遍历操作。