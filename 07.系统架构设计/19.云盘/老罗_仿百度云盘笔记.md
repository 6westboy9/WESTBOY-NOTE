# 资料

* [老罗easypan仿百度网盘](https://www.bilibili.com/video/BV1qV4y1d7zY/?spm_id_from=333.337.search-card.all.click)
* [Herry的easy云盘学习笔记](https://heyherry.xyz)

# 功能点

## 我的网盘

- 登录注册
	- 注册
	- 登录、QQ登录
	- 找回密码
	- 发送邮箱验证码
- 首页
	- 文件批量上传
	    - 分片上传
	    - 秒传
	    - 断点续传
	    - 预览上传
	- 文件列表
		- 新建文件夹
		- 文件在线预览
		    - 视频播放
		    - 音乐播放
		    - 图片预览
		    - excel、doc预览
		    - 文本预览
		    - pdf在线预览
		- 文件下载
		- 分享
		- 删除
		- 重命名
		- 移动
- 分享
	- 取消分享
	- 复制分享链接
- 回收站
	- 还原
	- 彻底删除
- ! 设置（管理员）设置这块本来计划设计成专门的管理后台进行管理，发现功能并不多，就整在一起了
	- 用户文件（查看所有用户上传的文件）
		- 删除
		- 预览/下载
	- 用户管理
		- 分配空间
		- 启用、禁用
	- 系统设置
		- 设置邮件模板
		- 设置用户初始存储空间

## 外部分享

- 通过分享查看查看文件列表
- 预览文件
	- 视频播放
	- 音乐播放
	- 图片预览
	- exlce、doc预览
	- 文本预览
	- pdf在线预览
- 保存到我的网盘
- 当前用户职场分享

# 技术栈

* 前端 --- Vue3
* 后端
	* SpringBoot
	* MySQL
	* Redis
	* FFmpeg


# ER


## 聊天消息表-chat_message


![[Pasted image 20250627215121.png|L|900]]

```SQL
CREATE TABLE `chat_message` (
  `message_id` BIGINT(20) NOT NULL COMMENT '消息自增ID',
  `session_id` VARCHAR(32) NOT NULL COMMENT '会话ID',
  `message_type` TINYINT(1) NOT NULL COMMENT '消息类型',
  `message_content` VARCHAR(500) COMMENT '消息内容',
  `send_user_id` VARCHAR(12) COMMENT '发送人ID',
  `send_user_nick_name` VARCHAR(20) COMMENT '发送人昵称',
  `send_time` BIGINT(20) COMMENT '发送时间',
  `contact_id` VARCHAR(12) NOT NULL COMMENT '接收联系人ID',
  `contact_type` TINYINT(1) COMMENT '联系人类型 0:单聊 1:群聊',
  `file_size` BIGINT(20) COMMENT '文件大小',
  `file_name` VARCHAR(200) COMMENT '文件名',
  `file_type` TINYINT(1) COMMENT '文件类型',
  `status` TINYINT(1) COMMENT '状态 0:正在发送 1:已发送',
  PRIMARY KEY (`message_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='聊天消息表';
```
## 聊天会话表-chat_session

![[Pasted image 20250627215425.png|L|900]]

```SQL
CREATE TABLE `chat_session` (
  `session_id` VARCHAR(32) NOT NULL COMMENT '会话ID',
  `last_message` VARCHAR(500) COMMENT '最后接受的消息',
  `last_receive_time` BIGINT(11) COMMENT '最后接受消息的时间戳（秒）',
  PRIMARY KEY (`session_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='聊天会话表';
```
## 聊天会话用户表-chat_session_user


![[Pasted image 20250627215223.png|L|900]]

```sql
CREATE TABLE chat_session_user (
    user_id VARCHAR(12) NOT NULL COMMENT '用户ID',
    contact_id VARCHAR(12) NOT NULL COMMENT '联系人ID',
    session_id VARCHAR(32) NOT NULL COMMENT '会话ID',
    contact_name VARCHAR(20) COMMENT '联系人名称',
    PRIMARY KEY (user_id, contact_id)
) NGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='聊天会话用户表';;
```

