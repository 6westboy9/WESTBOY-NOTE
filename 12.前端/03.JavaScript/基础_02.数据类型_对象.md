# 1.创建方式

## 1.字面量

```js
const xiaoming = {
    name: '小明',
    age: 12
};
console.log(xiaoming);
```

> [!question] 表达式还是语句？

对象采用大括号表示，这导致了一个问题：如果行首是一个大括号，它到底是表达式还是语句？

```js
{ foo: 123 }
```

JavaScript引擎读到上面这行代码，会发现可能有两种含义。

* 第一种可能是，这是一个表达式，表示一个包含foo属性的对象；
* 第二种可能是，这是一个语句，表示一个代码区块，里面有一个标签foo，指向表达式123。

为了避免这种歧义，JavaScript引擎的做法是，如果遇到这种情况，无法确定是对象还是代码块，<span style="background:#fff88f">一律解释为代码块</span>。

如果要解释为对象，<span style="background:#fff88f">最好在大括号前加上圆括号</span>。因为圆括号的里面，只能是表达式，所以确保大括号只能解释为对象。

```js
({ foo: 123 }) // 正确
({ console.log(123) }) // 报错
```

## 2.new Object

```js
const xiaoming = new Object({
    name: '小明',
    age: 12
});
console.log(xiaoming);
```

以上两种方式是等效的~

![[Pasted image 20240731105556.png|260]]
## 3.构造函数

何谓构造函数？

```
```


# 2.分类

| 分类    | 描述                             | 示例                                            |
| ----- | ------------------------------ | --------------------------------------------- |
| 内建对象  | 由ES标准中定义的对象，在任何的ES的实现中都可以使用    | Math String Number Boolean Function Object... |
| 宿主对象  | 由JS的运行环境提供的对象，目前来讲主要指由浏览器提供的对象 | BOM DOM                                       |
| 自定义对象 | 由开发人员自己创建的对象                   |                                               |

>自定义对象创建方式

```js
// 方式一
var obj = new Object();  

// 方式二
var obj = {}; 
```

# 3.属性是否加引号（重要）

> [!warning] 注意
> 1.对象的属性键名不符合JS标识符命名规范
> 2.对象的属性名不确定

```js
var p = {};

// 1.不符合命名规范
// p.content-type = 'text/json'; // 不能用
p['content-type'] = 'text/json';
console.log(p['content-type']);

// 2.属性名不确定
var propName = 'myAge';
var value = 18;
// p.propName = value; // 不能用
p[propName] = value;
console.log(p[propName]);
```

# 4.属性操作

## 属性查看

```js
var obj = {
  key1: 1,
  key2: 2
};

Object.keys(obj);
// ['key1', 'key2']
```

## 属性读取

```js
var obj = {
  p: 'Hello World'
};

obj.p    // "Hello World"
obj['p'] // "Hello World"
```

请注意，如果使用方括号运算符，键名必须放在引号里面，否则会被当作变量处理。

```js
var foo = 'bar';

var obj = {
  foo: 1,
  bar: 2
};

obj.foo   // 1
obj[foo]  // 2
```

上面代码中，引用对象obj的foo属性时，如果使用点运算符，foo就是字符串；如果使用方括号运算符，<font color="#c0504d">但是不使用引号，那么foo就是一个变量，指向字符串bar</font>。

方括号运算符内部还可以使用表达式。

```js
obj['hello' + ' world']
obj[3 + 3]
```

<font color="#c0504d">数字键可以不加引号，因为会自动转成字符串</font>。

```js
var obj = {
  0.7: 'Hello World'
};

obj['0.7'] // "Hello World"
obj[0.7]   // "Hello World"
```

注意，<font color="#c0504d">数值键名不能使用点运算符</font>（因为会被当成小数点），只能使用方括号运算符。

```js
var obj = {
  123: 'hello world'
};

obj.123 // 报错
obj[123] // "hello world"
```

## 属性增加

>语法

```js
// 对象的属性名没有任何要求，不需要遵守标识符的规范，但是在开发中，尽量按照标识符的要求去写！
// 如果对象本身没有某个属性值，在如下两种方式进行，这个属性会被创建出来 → 那使用方式2可以创建出来吗？
对象.属性名 = 属性值;
对象['属性名'] = 属性值; // 这种方式能够使用特殊的属性名
```

```js
var obj = {
    a: 10
};
obj.b = 40;
```

```
var obj = {};
obj.b = 40;
```

## 属性删除

```js
let obj = {
    name: 'meng',
    age: '18',
    gender: 'man'
}

obj.name = undefined // 把name属性设置为undefined
delete obj.name      // 删除属性
```

>1.把属性设置为undefined不是删除此属性，只是改变了属性的值，这个要和delete区分开

```js
// 可以用下面代码验证对象是否含有此属性
'name’ in obj === false
// 也可以使用Object.keys(obj)查看
```

```js
// 可以用下面代码验证含有属性且属性的值为undefined
'name' in obj && obj.name === undefined
// obj.name === undefined不能判断name是否为obj的属性，所以要做一个&&运算
```

>2.删除一个不存在的属性，delete不报错，而且返回true

```js
var obj = {};
delete obj.p // true
```

>3.只有一种情况，delete命令会返回false，那就是该属性存在，且不得删除

```js
var obj = Object.defineProperty({}, 'p', {
  value: 123,
  configurable: false
});

obj.p // 123
delete obj.p // false
```

扩展：[Object的静态方法defineProperty的configuration属性](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty#configurable)

>4.delete命令只能删除对象本身的属性，无法删除继承的属性

```js
var obj = {};
delete obj.toString // true
obj.toString // function toString() { [native code] }
```

上面代码中，toString是对象obj继承的属性，虽然delete命令返回true，但该属性并没有被删除，依然存在。

这个例子还说明，即使delete返回true，该属性依然可能读取到值。

## 属性是否存在

```js
// 可以用下面代码验证对象是否含有此属性
// 也可以使用Object.keys(obj)查看
'name’ in obj === false 
```

## 属性遍历

`for...in`循环用来遍历一个对象的全部属性。

```js
var obj = {a: 1, b: 2, c: 3};

for (var i in obj) {
  console.log('键名：', i);
  console.log('键值：', obj[i]);
}

// 键名： a
// 键值： 1
// 键名： b
// 键值： 2
// 键名： c
// 键值： 3
```

`for...in`循环有<span style="background:#fff88f">两个使用注意点</span>

- 它遍历的是对象所有可遍历（enumerable）的属性，会跳过不可遍历的属性。
- 它不仅遍历对象自身的属性，还遍历继承的属性。

举例来说，对象都继承了`toString`属性，但是`for...in`循环不会遍历到这个属性。

```js
var obj = {};

// toString属性是存在的
obj.toString // toString() { [native code] }

for (var p in obj) {
  console.log(p);         // 没有任何输出
} 
```

上面代码中，对象`obj`继承了`toString`属性，该属性不会被`for...in`循环遍历到，因为它默认是不可遍历的。

## 属性安全访问

>ES6语法

可选链语法`?.`是JavaScript中的一个运算符，用于安全地访问嵌套对象的属性。它允许你访问可能为`undefined`或`null`的属性，而不会导致错误。

```js
// 如果object为undefined或null，则返回undefined，否则，返回object.property
object?.property
```

# 5.with语句

https://wangdoc.com/javascript/types/object#with-%E8%AF%AD%E5%8F%A5

它的作用是操作同一个对象的多个属性时，提供一些书写的方便。

